  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndexToMovies (20231015164011)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE INDEX "index_movies_on_title" ON "movies" ("title")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231015164011"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20231027142944)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password" character varying, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231027142944"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20231027142944)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password" character varying, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231027142944"]]
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "admin@email.com"], ["password", "[FILTERED]"], ["role", "admin"], ["active", true], ["created_at", "2023-10-28 15:34:41.673634"], ["updated_at", "2023-10-28 15:34:41.673634"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user1@email.com"], ["password", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-28 15:34:41.679834"], ["updated_at", "2023-10-28 15:34:41.679834"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user2@email.com"], ["password", "[FILTERED]"], ["role", "user"], ["active", false], ["created_at", "2023-10-28 15:34:41.683944"], ["updated_at", "2023-10-28 15:34:41.683944"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user3@email.com"], ["password", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-28 15:34:41.688359"], ["updated_at", "2023-10-28 15:34:41.688359"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] Enqueued RemoveInactiveUsersJob (Job ID: 2f9558f0-043f-4631-893e-a756179a9084) to Async(default) at 2023-10-28 16:07:22 UTC
[ActiveJob] [RemoveInactiveUsersJob] [2f9558f0-043f-4631-893e-a756179a9084] Performing RemoveInactiveUsersJob (Job ID: 2f9558f0-043f-4631-893e-a756179a9084) from Async(default) enqueued at 2023-10-28T16:05:22Z
[ActiveJob] [RemoveInactiveUsersJob] [2f9558f0-043f-4631-893e-a756179a9084]   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = $1[0m  [["active", false]]
[ActiveJob] [RemoveInactiveUsersJob] [2f9558f0-043f-4631-893e-a756179a9084]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [RemoveInactiveUsersJob] [2f9558f0-043f-4631-893e-a756179a9084]   [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 3]]
[ActiveJob] [RemoveInactiveUsersJob] [2f9558f0-043f-4631-893e-a756179a9084]   [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [RemoveInactiveUsersJob] [2f9558f0-043f-4631-893e-a756179a9084] Performed RemoveInactiveUsersJob (Job ID: 2f9558f0-043f-4631-893e-a756179a9084) from Async(default) in 27.7ms
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "admin@email.com"], ["password", "[FILTERED]"], ["role", "admin"], ["active", true], ["created_at", "2023-10-28 16:13:48.592199"], ["updated_at", "2023-10-28 16:13:48.592199"]]
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user1@email.com"], ["password", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-28 16:13:48.597977"], ["updated_at", "2023-10-28 16:13:48.597977"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user2@email.com"], ["password", "[FILTERED]"], ["role", "user"], ["active", false], ["created_at", "2023-10-28 16:13:48.602274"], ["updated_at", "2023-10-28 16:13:48.602274"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user3@email.com"], ["password", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-28 16:13:48.606357"], ["updated_at", "2023-10-28 16:13:48.606357"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = $1[0m  [["active", false]]
  â†³ app/services/remove_inactive_users_service.rb:6:in `remove_inactive_users'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/remove_inactive_users_service.rb:6:in `remove_inactive_users'
  [1m[36mUser Destroy (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  â†³ app/services/remove_inactive_users_service.rb:6:in `remove_inactive_users'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/remove_inactive_users_service.rb:6:in `remove_inactive_users'
Started GET "/sidekiq" for ::1 at 2023-10-28 11:58:48 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/sidekiq/stylesheets/bootstrap.css" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/javascripts/application.js" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/stylesheets/application.css" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/javascripts/chart.min.js" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/stylesheets/application-dark.css" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/javascripts/dashboard-charts.js" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/javascripts/base-charts.js" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/javascripts/dashboard.js" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/images/status.png" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/javascripts/chartjs-plugin-annotation.min.js" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/images/favicon.ico" for ::1 at 2023-10-28 11:58:49 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 11:58:54 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 11:58:59 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 11:59:04 -0500
Started GET "/sidekiq" for ::1 at 2023-10-28 12:14:31 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:14:31 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:14:36 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:14:41 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:14:46 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:14:51 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:14:57 -0500
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = $1[0m  [["active", false]]
  â†³ app/services/remove_inactive_users_service.rb:6:in `remove_inactive_users'
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:02 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:07 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:11 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:16 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:21 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:26 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:31 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:36 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:41 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:46 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:51 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:15:56 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:01 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:06 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:11 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:16 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:21 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:26 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:31 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:36 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:41 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:46 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:51 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:16:56 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:01 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:06 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:11 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:16 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:21 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:26 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:31 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:36 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:41 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:46 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:51 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:17:56 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."active" = $1[0m  [["active", false]]
  â†³ app/services/remove_inactive_users_service.rb:6:in `remove_inactive_users'
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:01 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:06 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:11 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:16 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:21 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:26 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:31 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:36 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:41 -0500
Started GET "/sidekiq/stats" for ::1 at 2023-10-28 12:18:46 -0500
Started POST "/signup" for ::1 at 2023-10-29 09:24:47 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCACHE ActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

You have 1 pending migration:

20231028210355_create_users.rb


):
  
activerecord (7.0.7.2) lib/active_record/migration.rb:627:in `check_pending!'
activerecord (7.0.7.2) lib/active_record/migration.rb:592:in `block (2 levels) in call'
activesupport (7.0.7.2) lib/active_support/file_update_checker.rb:83:in `execute'
activerecord (7.0.7.2) lib/active_record/migration.rb:597:in `block in call'
activerecord (7.0.7.2) lib/active_record/migration.rb:589:in `synchronize'
activerecord (7.0.7.2) lib/active_record/migration.rb:589:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.7.2) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.7.2) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.7.2) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.7.2) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.7.2) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.7.2) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.7.2) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.7.2) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/method_override.rb:24:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.7.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.7.2) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.7.2) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.7.2) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20231028210355)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password" text, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20231028210355)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password" text, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231028210355"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "admin@email.com"], ["password", "[FILTERED]"], ["role", "admin"], ["active", true], ["created_at", "2023-10-29 14:31:53.991443"], ["updated_at", "2023-10-29 14:31:53.991443"]]
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user1@email.com"], ["password", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-29 14:31:53.999026"], ["updated_at", "2023-10-29 14:31:53.999026"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user2@email.com"], ["password", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-29 14:31:54.003164"], ["updated_at", "2023-10-29 14:31:54.003164"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Started POST "/signup" for ::1 at 2023-10-29 09:32:04 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
NameError (uninitialized constant ApplicationController::Response

  include Response
          ^^^^^^^^):
  
app/controllers/application_controller.rb:5:in `<class:ApplicationController>'
app/controllers/application_controller.rb:4:in `<main>'
app/controllers/users_controller.rb:4:in `<main>'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 10:21:00 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"email"=>"user3@email.com", "password"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"email"=>"user3@email.com", "password"=>"[FILTERED]", "role"=>"user", "active"=>true}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 1.0ms | Allocations: 674)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
lib/middleware/filter_ip.rb:15:in `call'
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20231029154600)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "emaiL" character varying, "password_digest" character varying, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231029154600"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (5010.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "films_imdb_development"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (39.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "films_imdb_development"[0m
  [1m[35m (35.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "films_imdb_test"[0m
  [1m[35m (879.1ms)[0m  [1m[35mCREATE DATABASE "films_imdb_development" ENCODING = 'unicode'[0m
  [1m[35m (907.1ms)[0m  [1m[35mCREATE DATABASE "films_imdb_test" ENCODING = 'unicode'[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateMovies (20230913232914)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "movies" ("id" bigserial primary key, "imdb_id" character varying, "title" character varying, "rating" decimal, "rank" integer, "year" integer, "data" jsonb, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230913232914"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20231029154600)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "password_digest" character varying, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231029154600"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-29 15:59:05.522024"], ["updated_at", "2023-10-29 15:59:05.522024"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/signup" for ::1 at 2023-10-29 10:59:32 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 1.1ms | Allocations: 629)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 11:03:33 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fc884e0b1c8>, params: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}} }[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.0ms | Allocations: 6443)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.

          raise UnknownAttributeError.new(self, k.to_s)
          ^^^^^):
  
app/controllers/users_controller.rb:8:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 11:08:01 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fc86f0de4b0>, params: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}} }[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.6ms | Allocations: 2837)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.

          raise UnknownAttributeError.new(self, k.to_s)
          ^^^^^):
  
app/controllers/users_controller.rb:8:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 11:08:55 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fc86f023818>, params: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}} }[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.8ms | Allocations: 2836)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.

          raise UnknownAttributeError.new(self, k.to_s)
          ^^^^^):
  
app/controllers/users_controller.rb:8:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 11:17:01 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f67d02df430>, params: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}} }[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.1ms | Allocations: 6444)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.

          raise UnknownAttributeError.new(self, k.to_s)
          ^^^^^):
  
app/controllers/users_controller.rb:8:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 11:18:10 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007faa81f4be00>, params: {"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true}} }[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.8ms | Allocations: 6452)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password_confirmation' for User.

          raise UnknownAttributeError.new(self, k.to_s)
          ^^^^^):
  
app/controllers/users_controller.rb:8:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 11:19:15 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007faa8024b0a8>, params: {"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "user1"], ["email", "user1@email.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-29 16:19:15.733934"], ["updated_at", "2023-10-29 16:19:15.733934"]]
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@email.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 7.5ms | Allocations: 12211)


  
NoMethodError (undefined method `authenticate' for #<User id: 1, name: "user1", email: "user1@email.com", password_digest: [FILTERED], role: "user", active: true, created_at: "2023-10-29 16:19:15.733934000 +0000", updated_at: "2023-10-29 16:19:15.733934000 +0000">):
  
app/auth/authenticate_user.rb:22:in `user'
app/auth/authenticate_user.rb:12:in `call'
app/controllers/users_controller.rb:9:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 11:59:03 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true}}
[31mUnpermitted parameters: :password_digest, :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f74065179b8>, params: {"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "password_digest"=>"[FILTERED]", "role"=>"user", "active"=>true}} }[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 8339)


Started POST "/signup" for ::1 at 2023-10-29 11:59:40 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f74048fd048>, params: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "user1"], ["email", "user1@email.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-29 16:59:40.638537"], ["updated_at", "2023-10-29 16:59:40.638537"]]
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@email.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 500 Internal Server Error in 193ms (ActiveRecord: 3.8ms | Allocations: 9081)


  
BCrypt::Errors::InvalidHash (invalid hash):
  
app/auth/authenticate_user.rb:22:in `user'
app/auth/authenticate_user.rb:12:in `call'
app/controllers/users_controller.rb:9:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/signup" for ::1 at 2023-10-29 12:04:44 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f74048bb990>, params: {"name"=>"user1", "email"=>"user1@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@email.com", "role"=>"user", "active"=>true}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "user1"], ["email", "user1@email.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-10-29 17:04:44.200704"], ["updated_at", "2023-10-29 17:04:44.200704"]]
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:8:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@email.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@email.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 201 Created in 533ms (Views: 0.2ms | ActiveRecord: 6.2ms | Allocations: 7366)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20231029154600)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "password_digest" character varying, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (28.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "films_imdb_development"[0m
  [1m[35m (21.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "films_imdb_test"[0m
  [1m[35m (223.8ms)[0m  [1m[35mCREATE DATABASE "films_imdb_development" ENCODING = 'unicode'[0m
  [1m[35m (131.0ms)[0m  [1m[35mCREATE DATABASE "films_imdb_test" ENCODING = 'unicode'[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateMovies (20230913232914)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "movies" ("id" bigserial primary key, "imdb_id" character varying, "title" character varying, "rating" decimal, "rank" integer, "year" integer, "data" jsonb, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230913232914"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20231029154600)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "password_digest" character varying, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231029154600"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-30 21:34:27.070540"], ["updated_at", "2023-10-30 21:34:27.070540"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/users/signup" for 127.0.0.1 at 2023-10-30 15:43:43 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#signup as HTML
  Rendering users/signup.html.erb
  Rendered users/signup.html.erb (Duration: 96.2ms | Allocations: 16679)
Completed 500 Internal Server Error in 139ms (ActiveRecord: 4.3ms | Allocations: 27288)


  
ActionView::Template::Error (undefined method `users_path' for #<ActionView::Base:0x0000000000d0e8>

              recipient.public_send(method, *args, options)
                       ^^^^^^^^^^^^
Did you mean?  users_signup_path):
    1: <%= simple_form_for @user do |f|%>
    2: <%= f.input :name %>
    3: <%= f.input :email %>
    4: <%= f.input :password %>
  
app/views/users/signup.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 07:58:05 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#signup as HTML
  Rendering users/signup.html.erb
  Rendered users/signup.html.erb (Duration: 38.4ms | Allocations: 8477)
Completed 500 Internal Server Error in 42ms (ActiveRecord: 0.0ms | Allocations: 9613)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass

      convert_to_model(record_or_class).model_name
                                       ^^^^^^^^^^^):
    1: <%= simple_form_for @user do |f|%>
    2: <%= f.input :name %>
    3: <%= f.input :email %>
    4: <%= f.input :password %>
  
app/views/users/signup.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 08:07:57 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#signup as HTML
Completed 422 Unprocessable Entity in 4ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 1178)


Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 08:09:24 -0600
Processing by UsersController#signup as HTML
  Rendering users/signup.html.erb
  Rendered users/signup.html.erb (Duration: 21.6ms | Allocations: 8478)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms | Allocations: 9523)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass

      convert_to_model(record_or_class).model_name
                                       ^^^^^^^^^^^):
    1: <%= simple_form_for @user do |f|%>
    2:   <%= f.input :name %>
    3:   <%= f.input :email %>
    4:   <%= f.input :password %>
  
app/views/users/signup.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 08:10:29 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#signup as HTML
Completed 422 Unprocessable Entity in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 943)


Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 08:13:26 -0600
  
AbstractController::ActionNotFound (The action 'signup' could not be found for UsersController):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/new" for 127.0.0.1 at 2023-10-31 08:13:34 -0600
Processing by UsersController#new as HTML
  Rendering users/new.html.erb
  Rendered users/new.html.erb (Duration: 34.7ms | Allocations: 13354)
Completed 200 OK in 63ms (Views: 35.7ms | ActiveRecord: 5.6ms | Allocations: 20981)


Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 08:14:16 -0600
  
AbstractController::ActionNotFound (The action 'signup' could not be found for UsersController):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 08:14:46 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
AbstractController::ActionNotFound (The action 'signup' could not be found for UsersController):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 08:16:42 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#signup as HTML
Completed 406 Not Acceptable in 16ms (ActiveRecord: 3.4ms | Allocations: 7957)


  
ActionController::MissingExactTemplate (UsersController#signup is missing a template for request formats: text/html):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for 127.0.0.1 at 2023-10-31 08:17:18 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#signup as HTML
  Rendering users/signup.html.erb
  Rendered users/signup.html.erb (Duration: 22.4ms | Allocations: 13257)
Completed 200 OK in 42ms (Views: 24.5ms | ActiveRecord: 2.6ms | Allocations: 22928)


Started GET "/" for 127.0.0.1 at 2023-10-31 12:15:34 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
Completed 422 Unprocessable Entity in 3ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 982)


Started GET "/" for 127.0.0.1 at 2023-10-31 12:17:34 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
Completed 422 Unprocessable Entity in 9ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 2650)


Started GET "/" for ::1 at 2023-11-03 10:24:16 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCACHE ActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

You have 1 pending migration:

20231015164011_add_index_to_movies.rb


):
  
activerecord (7.0.8) lib/active_record/migration.rb:662:in `check_pending!'
activerecord (7.0.8) lib/active_record/migration.rb:627:in `block (2 levels) in call'
activesupport (7.0.8) lib/active_support/file_update_checker.rb:83:in `execute'
activerecord (7.0.8) lib/active_record/migration.rb:632:in `block in call'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `synchronize'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/method_override.rb:24:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddIndexToMovies (20231015164011)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE INDEX "index_movies_on_title" ON "movies" ("title")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231015164011"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2023-11-03 10:24:59 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 5.1ms | Allocations: 3230)
  Rendered layout layouts/application.html.erb (Duration: 3036.3ms | Allocations: 150778)
Completed 200 OK in 3043ms (Views: 3037.6ms | ActiveRecord: 0.5ms | Allocations: 156488)


Started GET "/v1/api/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-03 10:25:18 -0500
  
ActionController::RoutingError (uninitialized constant SearchMoviesController

      Object.const_get(camel_cased_word)
            ^^^^^^^^^^
Did you mean?  SearchMovieService

            raise MissingController.new(error.message, error.name)
            ^^^^^):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-03 10:25:18 -0500
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 1.5ms | Allocations: 1239)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | Allocations: 7317)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.1ms | Allocations: 7727)


Started GET "/" for ::1 at 2023-11-03 10:30:51 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2982)
  Rendered layout layouts/application.html.erb (Duration: 50.7ms | Allocations: 49968)
Completed 200 OK in 56ms (Views: 51.6ms | ActiveRecord: 0.4ms | Allocations: 55182)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-03 10:31:03 -0500
  
ActionController::RoutingError (No route matches [GET] "/api/v1/search"):
  
Started GET "/" for ::1 at 2023-11-03 10:31:03 -0500
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 1.6ms | Allocations: 1252)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | Allocations: 7337)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.2ms | Allocations: 7751)


Started GET "/" for ::1 at 2023-11-03 10:32:02 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2981)
  Rendered layout layouts/application.html.erb (Duration: 48.1ms | Allocations: 50259)
Completed 200 OK in 53ms (Views: 48.9ms | ActiveRecord: 0.4ms | Allocations: 55473)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-03 10:32:10 -0500
  
ActionController::RoutingError (uninitialized constant SearchMoviesController

      Object.const_get(camel_cased_word)
            ^^^^^^^^^^
Did you mean?  SearchMovieService

            raise MissingController.new(error.message, error.name)
            ^^^^^):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-03 10:32:10 -0500
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 1.7ms | Allocations: 1252)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 7428)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.1ms | Allocations: 7844)


Started GET "/" for ::1 at 2023-11-03 10:33:01 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 4.3ms | Allocations: 2981)
  Rendered layout layouts/application.html.erb (Duration: 51.0ms | Allocations: 50056)
Completed 200 OK in 56ms (Views: 51.9ms | ActiveRecord: 0.4ms | Allocations: 55270)


Started GET "/" for ::1 at 2023-11-03 10:33:12 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2990)
  Rendered layout layouts/application.html.erb (Duration: 54.1ms | Allocations: 50107)
Completed 200 OK in 59ms (Views: 54.8ms | ActiveRecord: 0.5ms | Allocations: 55321)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-03 10:33:18 -0500
  
ActionController::RoutingError (uninitialized constant ApiV1SearchMoviesController

      Object.const_get(camel_cased_word)
            ^^^^^^^^^^

            raise MissingController.new(error.message, error.name)
            ^^^^^):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-03 10:33:18 -0500
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 1.5ms | Allocations: 1252)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | Allocations: 7322)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.1ms | Allocations: 7738)


Started GET "/" for ::1 at 2023-11-03 10:34:37 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 4.3ms | Allocations: 2981)
  Rendered layout layouts/application.html.erb (Duration: 48.8ms | Allocations: 50314)
Completed 200 OK in 54ms (Views: 49.7ms | ActiveRecord: 0.4ms | Allocations: 55528)


Started GET "/" for ::1 at 2023-11-03 10:34:37 -0500
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 1.2ms | Allocations: 1142)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | Allocations: 7123)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.1ms | Allocations: 7531)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-03 10:34:43 -0500
  
ActionController::RoutingError (uninitialized constant ApiV1SearchMoviesController

      Object.const_get(camel_cased_word)
            ^^^^^^^^^^

            raise MissingController.new(error.message, error.name)
            ^^^^^):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-03 10:34:43 -0500
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 1.8ms | Allocations: 1250)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | Allocations: 7420)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.3ms | Allocations: 7833)


Started GET "/api/v1/search?title=The%20Kid" for ::1 at 2023-11-03 11:01:34 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SearchMoviesController#search_movie as */*
  Parameters: {"title"=>"The Kid"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 1419)


  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/controllers/api/v1/search_movies_controller.rb:7:in `search_movie'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-03 11:04:24 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2982)
  Rendered layout layouts/application.html.erb (Duration: 50.0ms | Allocations: 50251)
Completed 200 OK in 55ms (Views: 50.9ms | ActiveRecord: 0.4ms | Allocations: 55465)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-03 11:04:32 -0500
Processing by Api::V1::SearchMoviesController#search_movie as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Sync movie"}
[31mUnpermitted parameter: :commit. Context: { controller: Api::V1::SearchMoviesController, action: search_movie, request: #<ActionDispatch::Request:0x00007fb2d8022c08>, params: {"title"=>"The Kid", "commit"=>"Sync movie", "controller"=>"api/v1/search_movies", "action"=>"search_movie"} }[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 628)


  
URI::InvalidURIError (bad URI(is not URI?): "http://localhost:8080/API/Search/k_12345678/{\"title\"=>\"The Kid\"}"):
  
app/services/search_movie_service.rb:8:in `search_movie'
app/controllers/api/v1/search_movies_controller.rb:8:in `search_movie'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-03 11:05:45 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2982)
  Rendered layout layouts/application.html.erb (Duration: 49.4ms | Allocations: 49926)
Completed 200 OK in 55ms (Views: 50.5ms | ActiveRecord: 0.4ms | Allocations: 55140)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-03 11:05:54 -0500
Processing by Api::V1::SearchMoviesController#search_movie as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Sync movie"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 386)


  
URI::InvalidURIError (bad URI(is not URI?): "http://localhost:8080/API/Search/k_12345678/The Kid"):
  
app/services/search_movie_service.rb:8:in `search_movie'
app/controllers/api/v1/search_movies_controller.rb:8:in `search_movie'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-03 11:16:29 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2981)
  Rendered layout layouts/application.html.erb (Duration: 49.3ms | Allocations: 50011)
Completed 200 OK in 54ms (Views: 50.1ms | ActiveRecord: 0.5ms | Allocations: 55225)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-03 11:16:37 -0500
Processing by Api::V1::SearchMoviesController#search_movie as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Sync movie"}
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "tt0012349"], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:13:in `search_movie'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/search_movie_service.rb:18:in `search_movie'
  [1m[36mMovie Create (1.9ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "tt0012349"], ["title", "The Kid"], ["rating", "8.3"], ["rank", nil], ["year", 1921], ["data", nil], ["created_at", "2023-11-03 16:16:37.149500"], ["updated_at", "2023-11-03 16:16:37.149500"]]
  â†³ app/services/search_movie_service.rb:18:in `search_movie'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/search_movie_service.rb:18:in `search_movie'
Completed 406 Not Acceptable in 36ms (ActiveRecord: 7.0ms | Allocations: 12104)


  
ActionController::MissingExactTemplate (Api::V1::SearchMoviesController#search_movie is missing a template for request formats: text/html):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-03 11:16:37 -0500
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb within layouts/application (Duration: 2.8ms | Allocations: 1978)
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | Allocations: 8215)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.1ms | Allocations: 8616)


Started GET "/api/v1/search?title=The%20Kid" for ::1 at 2023-11-04 10:49:48 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCACHE ActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

You have 1 pending migration:

20231103183216_create_users.rb


):
  
activerecord (7.0.8) lib/active_record/migration.rb:662:in `check_pending!'
activerecord (7.0.8) lib/active_record/migration.rb:627:in `block (2 levels) in call'
activesupport (7.0.8) lib/active_support/file_update_checker.rb:83:in `execute'
activerecord (7.0.8) lib/active_record/migration.rb:632:in `block in call'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `synchronize'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/method_override.rb:24:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20231103183216)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "password_digest" character varying, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (52.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "films_imdb_development"[0m
  [1m[35m (45.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "films_imdb_test"[0m
  [1m[35m (879.6ms)[0m  [1m[35mCREATE DATABASE "films_imdb_development" ENCODING = 'unicode'[0m
  [1m[35m (803.8ms)[0m  [1m[35mCREATE DATABASE "films_imdb_test" ENCODING = 'unicode'[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateMovies (20230913232914)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "movies" ("id" bigserial primary key, "imdb_id" character varying, "title" character varying, "rating" decimal, "rank" integer, "year" integer, "data" jsonb, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230913232914"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddIndexToMovies (20231015164011)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE INDEX "index_movies_on_title" ON "movies" ("title")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231015164011"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20231103183216)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "password_digest" character varying, "role" character varying, "active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231103183216"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-11-04 15:51:10.814258"], ["updated_at", "2023-11-04 15:51:10.814258"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(363417082060448220)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/search?title=The%20Kid" for ::1 at 2023-11-04 10:51:27 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SearchMoviesController#search_movie as */*
  Parameters: {"title"=>"The Kid"}
Completed 422 Unprocessable Entity in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 896)


Started GET "/movie/login" for ::1 at 2023-11-04 13:34:25 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
Completed 422 Unprocessable Entity in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 676)


Started GET "/movie/login" for ::1 at 2023-11-04 13:35:57 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.5ms | Allocations: 1240)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 3983)


  
ActionView::Template::Error (wrong number of arguments (given 3, expected 1..2)):
     5:   <%= form_with(local: true, url: '/auth/login') do |login_form| %>
     6:   <div class="form-group">
     7:     <%= login_form.label :email, "email", class: "form-label" %>
     8:     <%= login_form.text_field :password, "password", class: "form-control" %>
     9:     <%= login_form.submit class: "btn btn-primary"%>
    10:   </div>
    11:   <% end %>
  
app/views/authentication/login.html.erb:8
app/views/authentication/login.html.erb:5
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/login" for ::1 at 2023-11-04 13:37:21 -0500
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 6.1ms | Allocations: 2647)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms | Allocations: 3389)


Started GET "/movie/login" for ::1 at 2023-11-04 13:38:49 -0500
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.9ms | Allocations: 814)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms | Allocations: 1538)


Started GET "/movie/login" for ::1 at 2023-11-04 13:39:57 -0500
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.7ms | Allocations: 820)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 1540)


Started POST "/auth/login" for ::1 at 2023-11-04 13:40:24 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin", "password"=>"[FILTERED]", "commit"=>"Save "}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4a9a18b190>, params: {"email"=>"admin", "password"=>"[FILTERED]", "commit"=>"Save ", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4a9a18b190>, params: {"email"=>"admin", "password"=>"[FILTERED]", "commit"=>"Save ", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 4028)


Started GET "/movie/login" for ::1 at 2023-11-04 13:42:01 -0500
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.8ms | Allocations: 751)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms | Allocations: 1461)


Started GET "/movie/login" for ::1 at 2023-11-04 13:44:06 -0500
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 8.0ms | Allocations: 2572)
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms | Allocations: 3297)


Started GET "/" for ::1 at 2023-11-04 13:49:08 -0500
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.9ms | Allocations: 479)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 1017)


Started POST "/movie/signup" for ::1 at 2023-11-04 15:48:01 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"administrator", "email"=>"admin@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin", "active"=>true, "user"=>{"name"=>"administrator", "email"=>"admin@mail.com", "role"=>"admin", "active"=>true}}
Completed 422 Unprocessable Entity in 6ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 7890)


Started POST "/movie/signup" for ::1 at 2023-11-04 16:10:36 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"administrator", "email"=>"admin@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin", "active"=>true, "user"=>{"name"=>"administrator", "email"=>"admin@mail.com", "role"=>"admin", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f221f3eae48>, params: {"name"=>"administrator", "email"=>"admin@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"administrator", "email"=>"admin@mail.com", "role"=>"admin", "active"=>true}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:12:in `create'
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "administrator"], ["email", "admin@mail.com"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["active", true], ["created_at", "2023-11-04 21:10:37.199717"], ["updated_at", "2023-11-04 21:10:37.199717"]]
  â†³ app/controllers/users_controller.rb:12:in `create'
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:12:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 201 Created in 532ms (Views: 0.2ms | ActiveRecord: 7.3ms | Allocations: 11339)


Started GET "/" for ::1 at 2023-11-04 16:12:22 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.8ms | Allocations: 1563)
Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 0.0ms | Allocations: 4350)


Started POST "/auth/login" for ::1 at 2023-11-04 16:12:38 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ffad507c718>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ffad507c718>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 401 Unauthorized in 192ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 9170)


Started POST "/auth/login" for ::1 at 2023-11-04 16:22:11 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ffad92cfc50>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ffad92cfc50>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 361ms (ActiveRecord: 2.6ms | Allocations: 8233)


Started GET "/movie/index" for ::1 at 2023-11-04 16:22:11 -0500
  
ActionController::RoutingError (No route matches [GET] "/movie/index"):
  
Started POST "/auth/login" for ::1 at 2023-11-04 16:25:09 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f0798007b10>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f0798007b10>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 357ms (ActiveRecord: 2.1ms | Allocations: 10033)


Started GET "/movie/index" for ::1 at 2023-11-04 16:25:10 -0500
Processing by MovieController#index as HTML
Completed 422 Unprocessable Entity in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 532)


Started POST "/auth/login" for ::1 at 2023-11-04 16:27:00 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f5e1a355780>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f5e1a355780>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 355ms (ActiveRecord: 2.2ms | Allocations: 10033)


Started GET "/movie/index" for ::1 at 2023-11-04 16:27:00 -0500
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 2.7ms | Allocations: 2713)
Completed 200 OK in 7ms (Views: 3.6ms | ActiveRecord: 0.2ms | Allocations: 6182)


Started GET "/" for ::1 at 2023-11-04 17:52:01 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.8ms | Allocations: 1660)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 0.0ms | Allocations: 4447)


Started POST "/auth/login" for ::1 at 2023-11-04 17:52:13 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6f023994a0>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6f023994a0>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 370ms (ActiveRecord: 2.9ms | Allocations: 9951)


Started GET "/movie/index" for ::1 at 2023-11-04 17:52:14 -0500
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  Rendered movie/index.html.erb (Duration: 5.5ms | Allocations: 4883)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms | Allocations: 6247)


  
ActionView::Template::Error (undefined local variable or method `auth_token' for #<ActionView::Base:0x0000000000d700>

  '.freeze;@output_buffer.append=  form_with url: '/movie/search', method: :get, authenticity_token: auth_token do |form| @output_buffer.safe_append='
                                                                                                     ^^^^^^^^^^
Did you mean?  auth_login_url):
     6:     <%= link_to "Create movie", movie_new_path %>
     7:   </div>
     8:   <div class="row justify-content-center">
     9:   <%= form_with url: '/movie/search', method: :get, authenticity_token: auth_token do |form| %>
    10:     <%= form.label :title, "Search by title:" %>
    11:     <%= form.text_field :title %>
    12:     <%= form.submit "Search" %>
  
app/views/movie/index.html.erb:9
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-04 17:58:24 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.5ms | Allocations: 1620)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-04 17:58:35 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4a27955600>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4a27955600>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 500 Internal Server Error in 373ms (ActiveRecord: 2.6ms | Allocations: 12302)


  
NoMethodError (undefined method `movie_index' for #<AuthenticationController:0x0000000000d660>

    redirect_to movie_index(auth_token)
                ^^^^^^^^^^^
Did you mean?  movie_index_url):
  
app/controllers/authentication_controller.rb:12:in `authenticate'
lib/middleware/filter_ip.rb:15:in `call'
Started POST "/auth/login" for ::1 at 2023-11-04 17:59:03 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4a278dc7c8>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4a278dc7c8>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index.eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2OTkyMjUxNDR9.Tv7kfllOu-tV04Ob-UNP6hB_Knf67S62DIv5DYnQYEs
Completed 302 Found in 363ms (ActiveRecord: 1.8ms | Allocations: 5500)


Started GET "/movie/index.eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2OTkyMjUxNDR9.Tv7kfllOu-tV04Ob-UNP6hB_Knf67S62DIv5DYnQYEs" for ::1 at 2023-11-04 17:59:04 -0500
  
ActionController::RoutingError (No route matches [GET] "/movie/index.eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE2OTkyMjUxNDR9.Tv7kfllOu-tV04Ob-UNP6hB_Knf67S62DIv5DYnQYEs"):
  
Started GET "/" for ::1 at 2023-11-04 18:12:26 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.9ms | Allocations: 1620)
Completed 200 OK in 6ms (Views: 3.5ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-04 18:12:34 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ffbf5a99568>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ffbf5a99568>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 364ms (ActiveRecord: 2.8ms | Allocations: 10013)


Started GET "/movie/index" for ::1 at 2023-11-04 18:12:34 -0500
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  Rendered movie/index.html.erb (Duration: 5.5ms | Allocations: 4862)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms | Allocations: 6226)


  
ActionView::Template::Error (undefined local variable or method `auth_token' for #<ActionView::Base:0x0000000000d700>

  '.freeze;@output_buffer.append=  form_with url: '/movie/search', method: :get, authenticity_token: auth_token do |form| @output_buffer.safe_append='
                                                                                                     ^^^^^^^^^^
Did you mean?  auth_login_url):
     6:     <%= link_to "Create movie", movie_new_path %>
     7:   </div>
     8:   <div class="row justify-content-center">
     9:   <%= form_with url: '/movie/search', method: :get, authenticity_token: auth_token do |form| %>
    10:     <%= form.label :title, "Search by title:" %>
    11:     <%= form.text_field :title %>
    12:     <%= form.submit "Search" %>
  
app/views/movie/index.html.erb:9
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-04 18:24:50 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.4ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-04 18:25:00 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fb5642e5498>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fb5642e5498>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 364ms (ActiveRecord: 2.6ms | Allocations: 10246)


Started GET "/movie/index" for ::1 at 2023-11-04 18:25:01 -0500
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 2.4ms | Allocations: 2330)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.2ms | Allocations: 3679)


Started GET "/movie/search?title=The+Kid&commit=Search" for ::1 at 2023-11-04 18:25:19 -0500
Processing by MovieController#search as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Search"}
Completed 422 Unprocessable Entity in 8ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2140)


Started GET "/" for ::1 at 2023-11-04 18:29:44 -0500
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.3ms | Allocations: 755)
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.0ms | Allocations: 1471)


Started POST "/auth/login" for ::1 at 2023-11-04 18:29:52 -0500
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fb5641de018>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fb5641de018>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 355ms (ActiveRecord: 0.2ms | Allocations: 1704)


Started GET "/movie/index" for ::1 at 2023-11-04 18:29:53 -0500
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:23
  Rendered movie/index.html.erb (Duration: 2.5ms | Allocations: 2112)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.1ms | Allocations: 2723)


Started GET "/" for ::1 at 2023-11-05 09:22:14 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 3.3ms | Allocations: 1620)
Completed 200 OK in 9ms (Views: 5.2ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-05 09:22:25 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f81816cf250>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f81816cf250>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 368ms (ActiveRecord: 5.3ms | Allocations: 10238)


Started GET "/movie/index" for ::1 at 2023-11-05 09:22:25 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 2.6ms | Allocations: 2058)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.5ms | Allocations: 3407)


Started GET "/movie/new" for ::1 at 2023-11-05 09:22:31 -0600
Processing by MovieController#new as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 1806)


  
NameError (undefined local variable or method `session' for #<AuthorizeApiRequest:0x00007f8181617bf0 @headers=#<ActionDispatch::Http::Headers:0x00007f818161a288 @req=#<ActionDispatch::Request GET "http://localhost:3000/movie/new" for ::1>>>

    return @decoded_auth_token ||= JsonWebToken.decode(session[:auth_token]) if session[:auth_token]
                                                                                ^^^^^^^):
  
app/auth/authorize_api_request.rb:35:in `decoded_auth_token'
app/auth/authorize_api_request.rb:23:in `user'
app/auth/authorize_api_request.rb:12:in `call'
app/controllers/application_controller.rb:14:in `authorize_request'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-05 09:26:54 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.7ms | Allocations: 1363)
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.2ms | Allocations: 2928)


Started GET "/" for ::1 at 2023-11-05 09:27:03 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.3ms | Allocations: 480)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms | Allocations: 1013)


Started POST "/auth/login" for ::1 at 2023-11-05 09:27:14 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f818312ddb8>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f818312ddb8>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 362ms (ActiveRecord: 2.6ms | Allocations: 5153)


Started GET "/movie/index" for ::1 at 2023-11-05 09:27:14 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.5ms | Allocations: 1202)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.1ms | Allocations: 1525)


Started GET "/movie/new" for ::1 at 2023-11-05 09:27:17 -0600
Processing by MovieController#new as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 1697)


  
NameError (undefined local variable or method `session' for #<AuthorizeApiRequest:0x00007f8181be3f20 @headers=#<ActionDispatch::Http::Headers:0x00007f8181bdfad8 @req=#<ActionDispatch::Request GET "http://localhost:3000/movie/new" for ::1>>>

    return @decoded_auth_token ||= JsonWebToken.decode(session[:auth_token]) if session[:auth_token]
                                                                                ^^^^^^^):
  
app/auth/authorize_api_request.rb:35:in `decoded_auth_token'
app/auth/authorize_api_request.rb:23:in `user'
app/auth/authorize_api_request.rb:12:in `call'
app/controllers/application_controller.rb:14:in `authorize_request'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/new" for ::1 at 2023-11-05 09:28:22 -0600
Processing by MovieController#new as HTML
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1437)


  
NameError (undefined local variable or method `session' for #<AuthorizeApiRequest:0x00007f8181b5b990 @headers=#<ActionDispatch::Http::Headers:0x00007f8181b54af0 @req=#<ActionDispatch::Request GET "http://localhost:3000/movie/new" for ::1>>>

    return @decoded_auth_token ||= JsonWebToken.decode(session[:auth_token]) if session[:auth_token]
                                                                                ^^^^^^^):
  
app/auth/authorize_api_request.rb:35:in `decoded_auth_token'
app/auth/authorize_api_request.rb:23:in `user'
app/auth/authorize_api_request.rb:12:in `call'
app/controllers/application_controller.rb:14:in `authorize_request'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 09:28:32 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.8ms | Allocations: 755)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 1396)


Started POST "/auth/login" for ::1 at 2023-11-05 09:28:40 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8181acae68>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8181acae68>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 362ms (ActiveRecord: 0.3ms | Allocations: 1710)


Started GET "/movie/index" for ::1 at 2023-11-05 09:28:41 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:23
  Rendered movie/index.html.erb (Duration: 2.5ms | Allocations: 2117)
Completed 200 OK in 3ms (Views: 2.9ms | ActiveRecord: 0.1ms | Allocations: 2721)


Started GET "/" for ::1 at 2023-11-05 10:08:07 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.4ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-05 10:08:15 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8ede9516a8>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8ede9516a8>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 500 Internal Server Error in 370ms (ActiveRecord: 2.8ms | Allocations: 12181)


  
NameError (undefined local variable or method `cookies' for #<AuthenticationController:0x0000000000d660>

    cookies[:auth_token] = auth_token
    ^^^^^^^):
  
app/controllers/authentication_controller.rb:12:in `authenticate'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 10:09:54 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.4ms | Allocations: 481)
Completed 200 OK in 1ms (Views: 1.2ms | ActiveRecord: 0.0ms | Allocations: 1023)


Started POST "/auth/login" for ::1 at 2023-11-05 10:10:02 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8ee68cdc60>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8ee68cdc60>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 500 Internal Server Error in 366ms (ActiveRecord: 2.3ms | Allocations: 7471)


  
NameError (undefined local variable or method `cookies' for #<AuthenticationController:0x00000000011da0>

    cookies[:auth_token] = auth_token
    ^^^^^^^):
  
app/controllers/authentication_controller.rb:12:in `authenticate'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 10:29:51 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.3ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-05 10:30:02 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f88f043cf30>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f88f043cf30>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 370ms (ActiveRecord: 3.5ms | Allocations: 10423)


Started GET "/movie/index" for ::1 at 2023-11-05 10:30:02 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.8ms | Allocations: 2058)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.2ms | Allocations: 3407)


Started GET "/movie/new" for ::1 at 2023-11-05 10:30:04 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 1.5ms | Allocations: 1705)
Completed 200 OK in 10ms (Views: 1.8ms | ActiveRecord: 1.6ms | Allocations: 8077)


Started GET "/" for ::1 at 2023-11-05 10:30:17 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 16.2ms | Allocations: 404)
Completed 200 OK in 17ms (Views: 16.5ms | ActiveRecord: 0.0ms | Allocations: 590)


Started GET "/" for ::1 at 2023-11-05 10:34:52 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.3ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-05 10:35:01 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f1d8a7ca020>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f1d8a7ca020>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 370ms (ActiveRecord: 2.3ms | Allocations: 10414)


Started GET "/movie/index" for ::1 at 2023-11-05 10:35:01 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 2.2ms | Allocations: 2058)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.2ms | Allocations: 3407)


Started GET "/movie/new" for ::1 at 2023-11-05 10:35:03 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 1.9ms | Allocations: 1725)
Completed 200 OK in 12ms (Views: 2.6ms | ActiveRecord: 1.9ms | Allocations: 8008)


Started GET "/movie/index" for ::1 at 2023-11-05 10:35:05 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 18.6ms | Allocations: 1131)
Completed 200 OK in 19ms (Views: 18.7ms | ActiveRecord: 0.1ms | Allocations: 1421)


Started GET "/" for ::1 at 2023-11-05 12:49:34 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.6ms | Allocations: 1620)
Completed 200 OK in 6ms (Views: 3.5ms | ActiveRecord: 0.0ms | Allocations: 4418)


Started POST "/auth/login" for ::1 at 2023-11-05 12:49:41 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f1fb0445828>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f1fb0445828>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 364ms (ActiveRecord: 2.9ms | Allocations: 10387)


Started GET "/movie/index" for ::1 at 2023-11-05 12:49:41 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  Rendered movie/index.html.erb (Duration: 6.3ms | Allocations: 4541)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 5905)


  
ActionView::Template::Error (undefined local variable or method `current_user' for #<ActionView::Base:0x0000000000d700>

    current_user.role == ADMIN_ROLE
    ^^^^^^^^^^^^
Did you mean?  current_page?):
    3:     <h4 class="mt-4 display-4">Listing Movies</h4>
    4:   </div>
    5:   <div class="row justify-content-center">
    6:     <%= link_to "Create movie", movie_new_path, {enable: "#{user_is_admin?}"} %>
    7:   </div>
    8:   <div class="row justify-content-center">
    9:   <%= form_with url: '/movie/search', method: :get do |form| %>
  
app/helpers/application_helper.rb:8:in `user_is_admin?'
app/views/movie/index.html.erb:6
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 12:52:04 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.4ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.0ms | Allocations: 4418)


Started POST "/auth/login" for ::1 at 2023-11-05 12:52:13 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f87f5ee98a8>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f87f5ee98a8>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 358ms (ActiveRecord: 2.5ms | Allocations: 10407)


Started GET "/movie/index" for ::1 at 2023-11-05 12:52:14 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  Rendered movie/index.html.erb (Duration: 6.1ms | Allocations: 4836)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 6200)


  
ActionView::Template::Error (undefined local variable or method `current_user' for #<ActionView::Base:0x0000000000d700>

    '.freeze;@output_buffer.append=( link_to "Create movie", movie_new_path, {enable: "#{user_is_admin?(current_user)}"} );@output_buffer.safe_append='
                                                                                                        ^^^^^^^^^^^^
Did you mean?  current_page?):
    3:     <h4 class="mt-4 display-4">Listing Movies</h4>
    4:   </div>
    5:   <div class="row justify-content-center">
    6:     <%= link_to "Create movie", movie_new_path, {enable: "#{user_is_admin?(current_user)}"} %>
    7:   </div>
    8:   <div class="row justify-content-center">
    9:   <%= form_with url: '/movie/search', method: :get do |form| %>
  
app/views/movie/index.html.erb:6
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 13:18:42 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.4ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.0ms | Allocations: 4418)


Started POST "/auth/login" for ::1 at 2023-11-05 13:18:50 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fb256de7820>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fb256de7820>, params: {"email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 363ms (ActiveRecord: 2.5ms | Allocations: 10395)


Started GET "/movie/index" for ::1 at 2023-11-05 13:18:51 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.9ms | Allocations: 2069)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.1ms | Allocations: 3418)


Started GET "/movie/new" for ::1 at 2023-11-05 13:18:53 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 1.2ms | Allocations: 1725)
Completed 200 OK in 12ms (Views: 1.5ms | ActiveRecord: 2.5ms | Allocations: 8017)


Started GET "/movie/index" for ::1 at 2023-11-05 13:18:54 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.4ms | Allocations: 1131)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.1ms | Allocations: 1424)


Started POST "/movie/signup" for ::1 at 2023-11-05 13:23:11 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"user1", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "user"=>{"name"=>"user1", "email"=>"user1@mail.com", "role"=>"user", "active"=>true}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8075c01528>, params: {"name"=>"user1", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>true, "controller"=>"users", "action"=>"create", "user"=>{"name"=>"user1", "email"=>"user1@mail.com", "role"=>"user", "active"=>true}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:12:in `create'
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "user1"], ["email", "user1@mail.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-11-05 19:23:12.230025"], ["updated_at", "2023-11-05 19:23:12.230025"]]
  â†³ app/controllers/users_controller.rb:12:in `create'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:12:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 201 Created in 537ms (Views: 0.2ms | ActiveRecord: 7.5ms | Allocations: 11195)


Started GET "/movie/index" for ::1 at 2023-11-05 13:23:29 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 3.0ms | Allocations: 2750)
Completed 200 OK in 7ms (Views: 3.8ms | ActiveRecord: 0.3ms | Allocations: 6139)


Started GET "/" for ::1 at 2023-11-05 13:23:36 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.9ms | Allocations: 1060)
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.0ms | Allocations: 1680)


Started POST "/auth/login" for ::1 at 2023-11-05 13:23:57 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8075934430>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8075934430>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 356ms (ActiveRecord: 0.2ms | Allocations: 1995)


Started GET "/movie/index" for ::1 at 2023-11-05 13:23:57 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.4ms | Allocations: 1191)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.1ms | Allocations: 1514)


Started GET "/movie/new" for ::1 at 2023-11-05 13:23:59 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 1.3ms | Allocations: 1709)
Completed 200 OK in 9ms (Views: 1.7ms | ActiveRecord: 1.5ms | Allocations: 7974)


Started GET "/movie/index" for ::1 at 2023-11-05 13:24:04 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.4ms | Allocations: 1120)
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.1ms | Allocations: 1401)


Started GET "/" for ::1 at 2023-11-05 13:24:52 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.3ms | Allocations: 479)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 1016)


Started POST "/auth/login" for ::1 at 2023-11-05 13:25:08 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8075bb3c88>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8075bb3c88>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 366ms (ActiveRecord: 2.4ms | Allocations: 5455)


Started GET "/movie/index" for ::1 at 2023-11-05 13:25:08 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.4ms | Allocations: 1349)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 2583)


Started GET "/movie/new" for ::1 at 2023-11-05 13:25:10 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 0.9ms | Allocations: 1097)
Completed 200 OK in 12ms (Views: 1.2ms | ActiveRecord: 3.7ms | Allocations: 4906)


Started GET "/" for ::1 at 2023-11-05 13:26:30 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 2.6ms | Allocations: 480)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms | Allocations: 1018)


Started POST "/auth/login" for ::1 at 2023-11-05 13:26:41 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8075f3bc70>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8075f3bc70>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 373ms (ActiveRecord: 2.0ms | Allocations: 5444)


Started GET "/movie/index" for ::1 at 2023-11-05 13:26:41 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.3ms | Allocations: 1349)
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.1ms | Allocations: 2585)


Started GET "/movie/new" for ::1 at 2023-11-05 13:26:42 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 0.7ms | Allocations: 1097)
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 1.8ms | Allocations: 4907)


Started GET "/" for ::1 at 2023-11-05 13:29:15 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.3ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.0ms | Allocations: 4418)


Started POST "/auth/login" for ::1 at 2023-11-05 13:29:24 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fcce6972fd8>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fcce6972fd8>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 366ms (ActiveRecord: 2.9ms | Allocations: 10405)


Started GET "/movie/index" for ::1 at 2023-11-05 13:29:24 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.8ms | Allocations: 2069)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.2ms | Allocations: 3418)


Started GET "/movie/new" for ::1 at 2023-11-05 13:29:27 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 20.6ms | Allocations: 4524)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 1.4ms | Allocations: 10823)


  
ActionView::Template::Error (undefined local variable or method `current_user' for #<ActionView::Base:0x0000000000d8b8>

  '.freeze;@output_buffer.append=( current_user );@output_buffer.safe_append='
                                   ^^^^^^^^^^^^
Did you mean?  @current_user):
    2:   <div class="row justify-content-center">
    3:       <h4 class="mt-4 mb-4 display-4">Add Movie</h4>
    4:   </div>
    5:   <%= current_user %>
    6:   <%= form_with(model: @movie, local: true, url: movie_new_path)   do |movie_form| %>
    7:     <div class="form-group">
    8:       <%= movie_form.label :imdb_id, 'Id', class: "form-label"%>
  
app/views/movie/new.html.erb:5
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 13:30:41 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.4ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.0ms | Allocations: 4418)


Started POST "/auth/login" for ::1 at 2023-11-05 13:30:54 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f14ff15eb98>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f14ff15eb98>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 366ms (ActiveRecord: 3.2ms | Allocations: 10390)


Started GET "/movie/index" for ::1 at 2023-11-05 13:30:54 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 2.0ms | Allocations: 2069)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.2ms | Allocations: 3418)


Started GET "/movie/new" for ::1 at 2023-11-05 13:30:56 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 1.3ms | Allocations: 1745)
Completed 200 OK in 8ms (Views: 1.6ms | ActiveRecord: 1.4ms | Allocations: 8022)


Started GET "/movie/index" for ::1 at 2023-11-05 13:31:03 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 1.7ms | Allocations: 1131)
Completed 200 OK in 18ms (Views: 17.1ms | ActiveRecord: 0.3ms | Allocations: 1421)


Started GET "/" for ::1 at 2023-11-05 13:31:52 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.7ms | Allocations: 1620)
Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 0.0ms | Allocations: 4418)


Started POST "/auth/login" for ::1 at 2023-11-05 13:32:02 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f61b727b030>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f61b727b030>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 365ms (ActiveRecord: 2.9ms | Allocations: 10420)


Started GET "/movie/index" for ::1 at 2023-11-05 13:32:02 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 2.1ms | Allocations: 2070)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.2ms | Allocations: 3419)


Started GET "/movie/new" for ::1 at 2023-11-05 13:32:04 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 1.3ms | Allocations: 1746)
Completed 200 OK in 18ms (Views: 1.6ms | ActiveRecord: 3.9ms | Allocations: 8032)


Started GET "/" for ::1 at 2023-11-05 13:39:14 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.3ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.0ms | Allocations: 4418)


Started POST "/auth/login" for ::1 at 2023-11-05 13:39:24 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6d866b2470>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6d866b2470>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 366ms (ActiveRecord: 2.9ms | Allocations: 10410)


Started GET "/movie/index" for ::1 at 2023-11-05 13:39:24 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  Rendered movie/index.html.erb (Duration: 1.4ms | Allocations: 1797)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 3161)


  
ActionView::Template::Error (undefined method `role' for nil:NilClass

    user.role != ADMIN_ROLE
        ^^^^^):
    3:     <h4 class="mt-4 display-4">Listing Movies</h4>
    4:   </div>
    5:   <div class="row justify-content-center">
    6:     <%= link_to "Create movie", movie_new_path, {disabled: "#{user_is_not_admin?(@current_user)}"} %>
    7:   </div>
    8:   <div class="row justify-content-center">
    9:   <%= form_with url: '/movie/search', method: :get do |form| %>
  
app/helpers/application_helper.rb:8:in `user_is_not_admin?'
app/views/movie/index.html.erb:6
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 13:41:10 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.9ms | Allocations: 767)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms | Allocations: 1457)


Started POST "/auth/login" for ::1 at 2023-11-05 13:41:20 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6d868528c0>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6d868528c0>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 352ms (ActiveRecord: 0.2ms | Allocations: 1723)


Started GET "/movie/index" for ::1 at 2023-11-05 13:41:20 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  Rendered movie/index.html.erb (Duration: 1.2ms | Allocations: 1393)
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 1989)


  
ActionView::Template::Error (undefined method `role' for nil:NilClass

    user.role != ADMIN_ROLE
        ^^^^^):
    4:   </div>
    5:   <div class="row justify-content-center">
    6:     <%= @current_user%>
    7:     <%= link_to "Create movie", movie_new_path, {disabled: "#{user_is_not_admin?(@current_user)}"} %>
    8:   </div>
    9:   <div class="row justify-content-center">
   10:   <%= form_with url: '/movie/search', method: :get do |form| %>
  
app/helpers/application_helper.rb:8:in `user_is_not_admin?'
app/views/movie/index.html.erb:7
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-05 13:41:50 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:23
  Rendered movie/index.html.erb (Duration: 2.4ms | Allocations: 2067)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.3ms | Allocations: 2867)


Started GET "/" for ::1 at 2023-11-05 13:42:02 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.7ms | Allocations: 764)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 1273)


Started POST "/auth/login" for ::1 at 2023-11-05 13:42:15 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6d8e0ae9e0>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6d8e0ae9e0>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 352ms (ActiveRecord: 0.2ms | Allocations: 1702)


Started GET "/movie/index" for ::1 at 2023-11-05 13:42:16 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:23
  Rendered movie/index.html.erb (Duration: 1.7ms | Allocations: 1152)
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.1ms | Allocations: 1445)


Started GET "/movie/index" for ::1 at 2023-11-05 13:42:50 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  Rendered movie/index.html.erb (Duration: 6.9ms | Allocations: 4341)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 5116)


  
ActionView::Template::Error (undefined local variable or method `current_user' for #<ActionView::Base:0x0000000000dcc8>

    '.freeze;@output_buffer.append=( current_user);@output_buffer.safe_append='
                                     ^^^^^^^^^^^^
Did you mean?  current_page?):
    3:     <h4 class="mt-4 display-4">Listing Movies</h4>
    4:   </div>
    5:   <div class="row justify-content-center">
    6:     <%= current_user%>
    7:     <%= link_to "Create movie", movie_new_path %>
    8:   </div>
    9:   <div class="row justify-content-center">
  
app/views/movie/index.html.erb:6
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 13:49:15 -0600
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 0.6ms | Allocations: 769)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms | Allocations: 1583)


Started POST "/auth/login" for ::1 at 2023-11-05 13:49:24 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6d8e1adf58>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6d8e1adf58>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 369ms (ActiveRecord: 4.4ms | Allocations: 8189)


Started GET "/movie/index" for ::1 at 2023-11-05 13:49:24 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 3.3ms | Allocations: 1967)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.2ms | Allocations: 3272)


Started GET "/movie/new" for ::1 at 2023-11-05 13:49:26 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 0.9ms | Allocations: 540)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 5.5ms | Allocations: 6807)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <% unless user_is_not_admin do %>
  <% redirect_to '/movie/unauthorized' %>
<% end%>

<div class="container">
  <div class="row justify-content-center">
      <h4 class="mt-4 mb-4 display-4">Add Movie</h4>
  </div>
  <%= form_with(model: @movie, local: true, url: movie_new_path)   do |movie_form| %>
    <div class="form-group">
      <%= movie_form.label :imdb_id, 'Id', class: "form-label"%>
      <%= movie_form.text_field :imdb_id, class: "form-control" %>
    </div>

    <div class="form-group">
    <%= movie_form.label :title, 'Title', class: "form-label" %>
    <%= movie_form.text_field :title, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= movie_form.label :rating, 'Rating', class: "form-label" %>
      <%= movie_form.text_field :rating, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= movie_form.label :rank, 'Rank', class: "form-label" %>
      <%= movie_form.text_field :rank, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= movie_form.label :year, 'Year', class: "form-label" %>
      <%= movie_form.text_field :year, class: "form-control" %>
    </div>
    <div class="form-group">
      <%= movie_form.submit  class: "btn btn-primary" %>
    </div>
  <% end %>
  <%= link_to 'Home', movie_index_url %>
</div>


):
1:    <% unless user_is_not_admin do %>
2:      <% redirect_to '/movie/unauthorized' %>
3:    <% end%>
4:    
5:    <div class="container">
6:      <div class="row justify-content-center">
7:          <h4 class="mt-4 mb-4 display-4">Add Movie</h4>
8:      </div>
9:      <%= form_with(model: @movie, local: true, url: movie_new_path)   do |movie_form| %>
10:        <div class="form-group">
11:          <%= movie_form.label :imdb_id, 'Id', class: "form-label"%>
12:          <%= movie_form.text_field :imdb_id, class: "form-control" %>
13:        </div>
14:    
15:        <div class="form-group">
16:        <%= movie_form.label :title, 'Title', class: "form-label" %>
17:        <%= movie_form.text_field :title, class: "form-control" %>
18:        </div>
19:    
20:        <div class="form-group">
21:          <%= movie_form.label :rating, 'Rating', class: "form-label" %>
22:          <%= movie_form.text_field :rating, class: "form-control" %>
23:        </div>
24:    
25:        <div class="form-group">
26:          <%= movie_form.label :rank, 'Rank', class: "form-label" %>
27:          <%= movie_form.text_field :rank, class: "form-control" %>
28:        </div>
29:    
30:        <div class="form-group">
31:          <%= movie_form.label :year, 'Year', class: "form-label" %>
32:          <%= movie_form.text_field :year, class: "form-control" %>
33:        </div>
34:        <div class="form-group">
35:          <%= movie_form.submit  class: "btn btn-primary" %>
36:        </div>
37:      <% end %>
38:      <%= link_to 'Home', movie_index_url %>
39:    </div>
  
app/views/movie/new.html.erb:43: syntax error, unexpected end-of-input, expecting `end'
app/views/movie/new.html.erb:43: syntax error, unexpected end-of-input, expecting `end'
app/views/movie/new.html.erb:43: syntax error, unexpected end-of-input, expecting `end'
app/views/movie/new.html.erb:43: syntax error, unexpected end-of-input, expecting `end'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/new" for ::1 at 2023-11-05 13:49:49 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 0.4ms | Allocations: 530)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 1936)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <% unless user_is_not_admin(@current_user) do %>
  <% redirect_to '/movie/unauthorized' %>
<% end%>

<div class="container">
  <div class="row justify-content-center">
      <h4 class="mt-4 mb-4 display-4">Add Movie</h4>
  </div>
  <%= form_with(model: @movie, local: true, url: movie_new_path)   do |movie_form| %>
    <div class="form-group">
      <%= movie_form.label :imdb_id, 'Id', class: "form-label"%>
      <%= movie_form.text_field :imdb_id, class: "form-control" %>
    </div>

    <div class="form-group">
    <%= movie_form.label :title, 'Title', class: "form-label" %>
    <%= movie_form.text_field :title, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= movie_form.label :rating, 'Rating', class: "form-label" %>
      <%= movie_form.text_field :rating, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= movie_form.label :rank, 'Rank', class: "form-label" %>
      <%= movie_form.text_field :rank, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= movie_form.label :year, 'Year', class: "form-label" %>
      <%= movie_form.text_field :year, class: "form-control" %>
    </div>
    <div class="form-group">
      <%= movie_form.submit  class: "btn btn-primary" %>
    </div>
  <% end %>
  <%= link_to 'Home', movie_index_url %>
</div>


):
1:    <% unless user_is_not_admin(@current_user) do %>
2:      <% redirect_to '/movie/unauthorized' %>
3:    <% end%>
4:    
5:    <div class="container">
6:      <div class="row justify-content-center">
7:          <h4 class="mt-4 mb-4 display-4">Add Movie</h4>
8:      </div>
9:      <%= form_with(model: @movie, local: true, url: movie_new_path)   do |movie_form| %>
10:        <div class="form-group">
11:          <%= movie_form.label :imdb_id, 'Id', class: "form-label"%>
12:          <%= movie_form.text_field :imdb_id, class: "form-control" %>
13:        </div>
14:    
15:        <div class="form-group">
16:        <%= movie_form.label :title, 'Title', class: "form-label" %>
17:        <%= movie_form.text_field :title, class: "form-control" %>
18:        </div>
19:    
20:        <div class="form-group">
21:          <%= movie_form.label :rating, 'Rating', class: "form-label" %>
22:          <%= movie_form.text_field :rating, class: "form-control" %>
23:        </div>
24:    
25:        <div class="form-group">
26:          <%= movie_form.label :rank, 'Rank', class: "form-label" %>
27:          <%= movie_form.text_field :rank, class: "form-control" %>
28:        </div>
29:    
30:        <div class="form-group">
31:          <%= movie_form.label :year, 'Year', class: "form-label" %>
32:          <%= movie_form.text_field :year, class: "form-control" %>
33:        </div>
34:        <div class="form-group">
35:          <%= movie_form.submit  class: "btn btn-primary" %>
36:        </div>
37:      <% end %>
38:      <%= link_to 'Home', movie_index_url %>
39:    </div>
  
app/views/movie/new.html.erb:43: syntax error, unexpected end-of-input, expecting `end'
app/views/movie/new.html.erb:43: syntax error, unexpected end-of-input, expecting `end'
app/views/movie/new.html.erb:43: syntax error, unexpected end-of-input, expecting `end'
app/views/movie/new.html.erb:43: syntax error, unexpected end-of-input, expecting `end'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 13:51:50 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.4ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.0ms | Allocations: 4418)


Started POST "/auth/login" for ::1 at 2023-11-05 13:51:59 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6096ba2978>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6096ba2978>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 367ms (ActiveRecord: 2.8ms | Allocations: 10383)


Started GET "/movie/index" for ::1 at 2023-11-05 13:52:00 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 2.1ms | Allocations: 2069)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.2ms | Allocations: 3418)


Started GET "/movie/new" for ::1 at 2023-11-05 13:52:01 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 23.0ms | Allocations: 4268)
Completed 500 Internal Server Error in 36ms (ActiveRecord: 2.8ms | Allocations: 10595)


  
ActionView::Template::Error (undefined method `user_is_not_admin' for #<ActionView::Base:0x0000000000d8b8>

            @virtual_path = "movie/new";;  redirect_to '/movie/unauthorized' unless user_is_not_admin(@current_user)
                                                                                    ^^^^^^^^^^^^^^^^^
Did you mean?  user_is_admin?):
    1: <%  redirect_to '/movie/unauthorized' unless user_is_not_admin(@current_user)%>
    2: 
    3: <div class="container">
    4:   <div class="row justify-content-center">
  
app/views/movie/new.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/new" for ::1 at 2023-11-05 13:52:28 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 5.9ms | Allocations: 3869)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms | Allocations: 5471)


  
ActionView::Template::Error (undefined method `user_is_admin' for #<ActionView::Base:0x0000000000da70>

            @virtual_path = "movie/new";;  redirect_to '/movie/unauthorized' unless user_is_admin(@current_user)
                                                                                    ^^^^^^^^^^^^^
Did you mean?  user_is_admin?):
    1: <%  redirect_to '/movie/unauthorized' unless user_is_admin(@current_user)%>
    2: 
    3: <div class="container">
    4:   <div class="row justify-content-center">
  
app/views/movie/new.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/new" for ::1 at 2023-11-05 13:52:58 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 4.0ms | Allocations: 4141)
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms | Allocations: 5746)


  
ActionView::Template::Error (undefined local variable or method `helpers' for #<ActionView::Base:0x0000000000dc50>

            @virtual_path = "movie/new";;  redirect_to '/movie/unauthorized' unless helpers.user_is_admin(@current_user)
                                                                                    ^^^^^^^
Did you mean?  headers):
    1: <%  redirect_to '/movie/unauthorized' unless helpers.user_is_admin(@current_user)%>
    2: 
    3: <div class="container">
    4:   <div class="row justify-content-center">
  
app/views/movie/new.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-05 13:58:43 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.3ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-05 13:58:51 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6645252a80>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6645252a80>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 370ms (ActiveRecord: 3.0ms | Allocations: 10414)


Started GET "/movie/index" for ::1 at 2023-11-05 13:58:52 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  Rendered movie/index.html.erb (Duration: 2.1ms | Allocations: 2069)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.2ms | Allocations: 3418)


Started GET "/movie/new" for ::1 at 2023-11-05 13:58:53 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 23.6ms | Allocations: 4266)
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.7ms | Allocations: 10593)


  
ActionView::Template::Error (undefined method `user_is_admin' for #<ActionView::Base:0x0000000000d8b8>

            @virtual_path = "movie/new";;  redirect_to '/movie/unauthorized' unless user_is_admin(@current_user)
                                                                                    ^^^^^^^^^^^^^
Did you mean?  user_is_admin?):
    1: <%  redirect_to '/movie/unauthorized' unless user_is_admin(@current_user)%>
    2: 
    3: <div class="container">
    4:   <div class="row justify-content-center">
  
app/views/movie/new.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/new" for ::1 at 2023-11-05 13:59:13 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
  Rendered movie/new.html.erb (Duration: 5.9ms | Allocations: 3822)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms | Allocations: 5424)


  
ActionView::Template::Error (undefined method `redirect_to' for #<ActionView::Base:0x0000000000da70>

            @virtual_path = "movie/new";;  redirect_to '/movie/unauthorized' unless user_is_admin?(@current_user)
                                           ^^^^^^^^^^^):
    1: <%  redirect_to '/movie/unauthorized' unless user_is_admin?(@current_user)%>
    2: 
    3: <div class="container">
    4:   <div class="row justify-content-center">
  
app/views/movie/new.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/new" for ::1 at 2023-11-05 14:03:00 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/new.html.erb
Redirected to http://localhost:3000/movie/unauthorized
  Rendered movie/new.html.erb (Duration: 1.8ms | Allocations: 1909)
Completed 302 Found in 5ms (Views: 2.8ms | ActiveRecord: 0.2ms | Allocations: 3527)


Started GET "/movie/unauthorized" for ::1 at 2023-11-05 14:03:00 -0600
Processing by MovieController#unauthorized as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/unauthorized.html.erb
  Rendered movie/unauthorized.html.erb (Duration: 6.2ms | Allocations: 3765)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.2ms | Allocations: 4903)


  
ActionView::Template::Error (undefined local variable or method `current_user' for #<ActionView::Base:0x0000000000dc78>

            @virtual_path = "movie/unauthorized";;@output_buffer.safe_append='<p>User '.freeze;@output_buffer.append=( current_user );@output_buffer.safe_append=' is not an admin user</p>'.freeze;
                                                                                                                       ^^^^^^^^^^^^
Did you mean?  @current_user):
    1: <p>User <%= current_user %> is not an admin user</p>
  
app/views/movie/unauthorized.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/unauthorized" for ::1 at 2023-11-05 14:03:57 -0600
Processing by MovieController#unauthorized as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/unauthorized.html.erb
  Rendered movie/unauthorized.html.erb (Duration: 0.3ms | Allocations: 160)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 1580)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "1"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "Oppenheimer"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.6ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "1"], ["title", "Oppenheimer"], ["rating", "8.5"], ["rank", 10], ["year", 2023], ["data", nil], ["created_at", "2023-11-05 20:07:26.402850"], ["updated_at", "2023-11-05 20:07:26.402850"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "2"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "Elemental"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "2"], ["title", "Elemental"], ["rating", "7.0"], ["rank", 12], ["year", 2023], ["data", nil], ["created_at", "2023-11-05 20:07:26.409588"], ["updated_at", "2023-11-05 20:07:26.409588"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "3"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "Blue beetle"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "3"], ["title", "Blue beetle"], ["rating", "6.2"], ["rank", 15], ["year", 2023], ["data", nil], ["created_at", "2023-11-05 20:07:26.415056"], ["updated_at", "2023-11-05 20:07:26.415056"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "4"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "The Nun 2"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "4"], ["title", "The Nun 2"], ["rating", "5.8"], ["rank", 23], ["year", 2023], ["data", nil], ["created_at", "2023-11-05 20:07:26.420715"], ["updated_at", "2023-11-05 20:07:26.420715"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "5"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "The Exorcist"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "5"], ["title", "The Exorcist"], ["rating", "8.9"], ["rank", 48], ["year", 1973], ["data", nil], ["created_at", "2023-11-05 20:07:26.426302"], ["updated_at", "2023-11-05 20:07:26.426302"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "6"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "Pulp fiction"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "6"], ["title", "Pulp fiction"], ["rating", "8.1"], ["rank", 8], ["year", 1994], ["data", nil], ["created_at", "2023-11-05 20:07:26.431708"], ["updated_at", "2023-11-05 20:07:26.431708"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "7"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "The Good, the Bad and the Ugly"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "7"], ["title", "The Good, the Bad and the Ugly"], ["rating", "8.8"], ["rank", 11], ["year", 1966], ["data", nil], ["created_at", "2023-11-05 20:07:26.437028"], ["updated_at", "2023-11-05 20:07:26.437028"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "8"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "Fight Club"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.1ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "8"], ["title", "Fight Club"], ["rating", "8.0"], ["rank", 14], ["year", 1999], ["data", nil], ["created_at", "2023-11-05 20:07:26.442313"], ["updated_at", "2023-11-05 20:07:26.442313"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "9"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "Inception"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "9"], ["title", "Inception"], ["rating", "8.8"], ["rank", 16], ["year", 2010], ["data", nil], ["created_at", "2023-11-05 20:07:26.447827"], ["updated_at", "2023-11-05 20:07:26.447827"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "10"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "Se7en"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "10"], ["title", "Se7en"], ["rating", "8.6"], ["rank", 19], ["year", 1995], ["data", nil], ["created_at", "2023-11-05 20:07:26.453264"], ["updated_at", "2023-11-05 20:07:26.453264"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "11"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "The Silent of the Lambs"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "11"], ["title", "The Silent of the Lambs"], ["rating", "8.6"], ["rank", 24], ["year", 1991], ["data", nil], ["created_at", "2023-11-05 20:07:26.458787"], ["updated_at", "2023-11-05 20:07:26.458787"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "12"], ["LIMIT", 1]]
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "The Back to the Future"], ["LIMIT", 1]]
  [1m[36mMovie Create (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "12"], ["title", "The Back to the Future"], ["rating", "8.5"], ["rank", 31], ["year", 1985], ["data", nil], ["created_at", "2023-11-05 20:07:26.464368"], ["updated_at", "2023-11-05 20:07:26.464368"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for ::1 at 2023-11-05 14:07:53 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.3ms | Allocations: 1620)
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.0ms | Allocations: 4407)


Started POST "/auth/login" for ::1 at 2023-11-05 14:08:03 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fb4fcd7aab0>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fb4fcd7aab0>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 367ms (ActiveRecord: 3.0ms | Allocations: 10401)


Started GET "/movie/index" for ::1 at 2023-11-05 14:08:03 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb (Duration: 11.3ms | Allocations: 11444)
Completed 200 OK in 13ms (Views: 9.0ms | ActiveRecord: 2.8ms | Allocations: 12803)


Started GET "/movie/edit/1" for ::1 at 2023-11-05 14:08:11 -0600
Processing by MovieController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:11:in `edit'
  Rendering movie/edit.html.erb
Redirected to http://localhost:3000/movie/unauthorized
  Rendered movie/edit.html.erb (Duration: 3.0ms | Allocations: 2606)
Completed 302 Found in 23ms (Views: 3.5ms | ActiveRecord: 0.3ms | Allocations: 4926)


Started GET "/movie/unauthorized" for ::1 at 2023-11-05 14:08:11 -0600
Processing by MovieController#unauthorized as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/unauthorized.html.erb
  Rendered movie/unauthorized.html.erb (Duration: 0.3ms | Allocations: 151)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.1ms | Allocations: 1299)


Started GET "/movie/delete/1" for ::1 at 2023-11-05 14:08:14 -0600
Processing by MovieController#delete as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:34:in `delete'
  Rendering movie/delete.html.erb
Redirected to http://localhost:3000/movie/unauthorized
  Rendered movie/delete.html.erb (Duration: 1.7ms | Allocations: 1566)
Completed 302 Found in 4ms (Views: 1.9ms | ActiveRecord: 0.3ms | Allocations: 3074)


Started GET "/movie/unauthorized" for ::1 at 2023-11-05 14:08:14 -0600
Processing by MovieController#unauthorized as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering movie/unauthorized.html.erb
  Rendered movie/unauthorized.html.erb (Duration: 0.0ms | Allocations: 9)
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 938)


Started GET "/movie/show/1" for ::1 at 2023-11-05 14:08:16 -0600
Processing by MovieController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:15:in `show'
  Rendering movie/show.html.erb
  Rendered movie/show.html.erb (Duration: 1.4ms | Allocations: 258)
Completed 200 OK in 7ms (Views: 1.9ms | ActiveRecord: 0.7ms | Allocations: 1755)


Started GET "/movie/index" for ::1 at 2023-11-05 14:08:18 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb (Duration: 4.2ms | Allocations: 3629)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.5ms | Allocations: 3911)


Started GET "/movie/index?page=2" for ::1 at 2023-11-05 14:09:26 -0600
Processing by MovieController#index as HTML
  Parameters: {"page"=>"2"}
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 3]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb (Duration: 5.6ms | Allocations: 4432)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.5ms | Allocations: 4701)


Started GET "/movie/index?page=3" for ::1 at 2023-11-05 14:09:28 -0600
Processing by MovieController#index as HTML
  Parameters: {"page"=>"3"}
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 6]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb (Duration: 5.4ms | Allocations: 4010)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.6ms | Allocations: 4279)


Started GET "/" for ::1 at 2023-11-11 09:44:41 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::DuplicateMigrationNameError (

Multiple migrations have the name CreateUsers.

):
  
activerecord (7.0.8) lib/active_record/migration.rb:1433:in `validate'
activerecord (7.0.8) lib/active_record/migration.rb:1306:in `initialize'
activerecord (7.0.8) lib/active_record/migration.rb:1184:in `new'
activerecord (7.0.8) lib/active_record/migration.rb:1184:in `open'
activerecord (7.0.8) lib/active_record/migration.rb:156:in `detailed_migration_message'
activerecord (7.0.8) lib/active_record/migration.rb:147:in `initialize'
activerecord (7.0.8) lib/active_record/migration.rb:662:in `exception'
activerecord (7.0.8) lib/active_record/migration.rb:662:in `raise'
activerecord (7.0.8) lib/active_record/migration.rb:662:in `check_pending!'
activerecord (7.0.8) lib/active_record/migration.rb:627:in `block (2 levels) in call'
activesupport (7.0.8) lib/active_support/file_update_checker.rb:83:in `execute'
activerecord (7.0.8) lib/active_record/migration.rb:632:in `block in call'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `synchronize'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/method_override.rb:24:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/" for ::1 at 2023-11-11 09:45:17 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering authentication/login.html.erb
  Rendered authentication/login.html.erb (Duration: 1.7ms | Allocations: 1393)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms | Allocations: 2333)


Started POST "/auth/login" for ::1 at 2023-11-11 09:45:28 -0600
Processing by AuthenticationController#authenticate as HTML
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fce95c35e90>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameter: :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fce95c35e90>, params: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 369ms (ActiveRecord: 4.5ms | Allocations: 10360)


Started GET "/movie/index" for ::1 at 2023-11-11 09:45:28 -0600
Processing by MovieController#index as HTML
  Rendering movie/index.html.erb
  [1m[36mMovie Load (0.8ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb (Duration: 12.2ms | Allocations: 11310)
Completed 200 OK in 14ms (Views: 9.6ms | ActiveRecord: 3.1ms | Allocations: 12713)


Started GET "/movie/search?title=aaa&commit=Search" for ::1 at 2023-11-11 09:45:41 -0600
Processing by MovieController#search as HTML
  Parameters: {"title"=>"aaa", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "aaa"], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:44:in `search'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.4ms | Allocations: 3319)


  
NoMethodError (undefined method `id' for nil:NilClass

    redirect_to "/movie/show/#{movie.id}"
                                    ^^^):
  
app/controllers/movie_controller.rb:45:in `search'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-11 09:48:51 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
NoMethodError (undefined method `caches_page' for ApplicationController:Class

  caches_page :index
  ^^^^^^^^^^^):
  
app/controllers/application_controller.rb:9:in `<class:ApplicationController>'
app/controllers/application_controller.rb:4:in `<main>'
app/controllers/authentication_controller.rb:4:in `<main>'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-11 09:50:31 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.9ms | Allocations: 1813)
  Rendered layout layouts/application.html.erb (Duration: 45.5ms | Allocations: 52024)
Completed 200 OK in 48ms (Views: 46.3ms | ActiveRecord: 0.0ms | Allocations: 54421)


Started POST "/auth/login" for ::1 at 2023-11-11 09:50:48 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8831552088>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f8831552088>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 363ms (ActiveRecord: 3.3ms | Allocations: 10370)


Started GET "/movie/index" for ::1 at 2023-11-11 09:50:48 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb within layouts/application (Duration: 10.2ms | Allocations: 11364)
  Rendered layout layouts/application.html.erb (Duration: 13.8ms | Allocations: 17746)
Completed 200 OK in 16ms (Views: 13.0ms | ActiveRecord: 1.5ms | Allocations: 19516)


Started GET "/" for ::1 at 2023-11-11 11:31:55 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.9ms | Allocations: 2242)
  Rendered layout layouts/application.html.erb (Duration: 35.8ms | Allocations: 48932)
Completed 200 OK in 40ms (Views: 37.3ms | ActiveRecord: 0.0ms | Allocations: 53202)


Started POST "/auth/login" for ::1 at 2023-11-11 11:32:05 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f674df386b0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f674df386b0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 369ms (ActiveRecord: 2.7ms | Allocations: 10380)


Started GET "/" for ::1 at 2023-11-11 11:37:16 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2215)
  Rendered layout layouts/application.html.erb (Duration: 34.0ms | Allocations: 48837)
Completed 200 OK in 39ms (Views: 35.4ms | ActiveRecord: 0.0ms | Allocations: 53107)


Started POST "/auth/login" for ::1 at 2023-11-11 11:37:35 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6545bd5a90>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f6545bd5a90>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 386ms (ActiveRecord: 5.9ms | Allocations: 10373)


Started GET "/" for ::1 at 2023-11-11 11:40:02 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2242)
  Rendered layout layouts/application.html.erb (Duration: 79.5ms | Allocations: 48909)
Completed 200 OK in 84ms (Views: 80.9ms | ActiveRecord: 0.0ms | Allocations: 53157)


Started POST "/auth/login" for ::1 at 2023-11-11 11:40:11 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ff042e32620>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ff042e32620>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 359ms (ActiveRecord: 2.6ms | Allocations: 10383)


Started GET "/" for ::1 at 2023-11-11 11:41:42 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.0ms | Allocations: 650)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | Allocations: 6583)
Completed 200 OK in 5ms (Views: 5.2ms | ActiveRecord: 0.0ms | Allocations: 6895)


Started POST "/auth/login" for ::1 at 2023-11-11 11:41:51 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ff0400bb160>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ff0400bb160>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 348ms (ActiveRecord: 0.3ms | Allocations: 1642)


Started GET "/" for ::1 at 2023-11-11 11:48:59 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2245)
  Rendered layout layouts/application.html.erb (Duration: 81.3ms | Allocations: 48649)
Completed 200 OK in 86ms (Views: 82.7ms | ActiveRecord: 0.0ms | Allocations: 52897)


Started POST "/auth/login" for ::1 at 2023-11-11 11:49:08 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f79db037c88>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f79db037c88>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 359ms (ActiveRecord: 2.5ms | Allocations: 10351)


Started GET "/" for ::1 at 2023-11-11 11:50:58 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2251)
  Rendered layout layouts/application.html.erb (Duration: 87.9ms | Allocations: 49057)
Completed 200 OK in 93ms (Views: 89.4ms | ActiveRecord: 0.0ms | Allocations: 53305)


Started POST "/auth/login" for ::1 at 2023-11-11 11:51:06 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fe6418acf58>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fe6418acf58>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 359ms (ActiveRecord: 2.2ms | Allocations: 10377)


Started GET "/movie/index" for ::1 at 2023-11-11 11:51:12 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 15.2ms | Allocations: 11730)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | Allocations: 17982)
Completed 200 OK in 21ms (Views: 17.8ms | ActiveRecord: 2.2ms | Allocations: 19582)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 11:51:57 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 2809ms (ActiveRecord: 0.2ms | Allocations: 4899)


  
NoMethodError (undefined method `find_or_save_movie' for SearchMovieService:Class

    find_or_save_movie(response)
    ^^^^^^^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:16:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 11:53:55 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 9.4ms | Allocations: 7178)
  Rendered layout layouts/application.html.erb (Duration: 18.9ms | Allocations: 25699)
Completed 200 OK in 21ms (Views: 17.8ms | ActiveRecord: 1.9ms | Allocations: 27413)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 11:54:01 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 2322ms (ActiveRecord: 1.4ms | Allocations: 7133)


  
NoMethodError (undefined method `find_or_save_movie' for SearchMovieService:Class

    find_or_save_movie(response)
    ^^^^^^^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:16:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 11:56:05 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 14.3ms | Allocations: 14464)
  Rendered layout layouts/application.html.erb (Duration: 98.3ms | Allocations: 61452)
Completed 200 OK in 104ms (Views: 96.8ms | ActiveRecord: 2.6ms | Allocations: 66812)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 11:56:10 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 2791ms (ActiveRecord: 5.2ms | Allocations: 10394)


  
NoMethodError (undefined method `save_movie' for SearchMovieService:Class

    save_movie(response)
    ^^^^^^^^^^
Did you mean?  search_movie):
  
app/services/search_movie_service.rb:16:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 11:56:36 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 7.3ms | Allocations: 7180)
  Rendered layout layouts/application.html.erb (Duration: 16.3ms | Allocations: 25694)
Completed 200 OK in 19ms (Views: 15.5ms | ActiveRecord: 1.5ms | Allocations: 27411)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 11:56:39 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 2341ms (ActiveRecord: 2.1ms | Allocations: 7122)


  
NoMethodError (undefined method `save_movie' for SearchMovieService:Class

    save_movie(response)
    ^^^^^^^^^^
Did you mean?  search_movie):
  
app/services/search_movie_service.rb:16:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-11 12:18:33 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2227)
  Rendered layout layouts/application.html.erb (Duration: 91.3ms | Allocations: 48989)
Completed 200 OK in 96ms (Views: 92.7ms | ActiveRecord: 0.0ms | Allocations: 53237)


Started POST "/auth/login" for ::1 at 2023-11-11 12:18:42 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fc5ad49dde0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007fc5ad49dde0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 356ms (ActiveRecord: 2.1ms | Allocations: 10349)


Started GET "/movie/index" for ::1 at 2023-11-11 12:18:43 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 11.6ms | Allocations: 11761)
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | Allocations: 18034)
Completed 200 OK in 17ms (Views: 14.4ms | ActiveRecord: 1.6ms | Allocations: 19675)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:18:47 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 2780ms (ActiveRecord: 0.2ms | Allocations: 4930)


  
NoMethodError (undefined method `create_movie' for SearchMovieService:Class

    movie = create_movie(response.body)
            ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:17:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 12:24:01 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 14.4ms | Allocations: 14464)
  Rendered layout layouts/application.html.erb (Duration: 100.1ms | Allocations: 61590)
Completed 200 OK in 106ms (Views: 99.2ms | ActiveRecord: 2.2ms | Allocations: 66950)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:24:06 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 2790ms (ActiveRecord: 1.9ms | Allocations: 10404)


  
NoMethodError (undefined method `create_movie' for SearchMovieService:Class

    movie = create_movie(response.body)
            ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:18:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 12:28:31 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 14.3ms | Allocations: 14465)
  Rendered layout layouts/application.html.erb (Duration: 98.0ms | Allocations: 61443)
Completed 200 OK in 103ms (Views: 96.9ms | ActiveRecord: 2.3ms | Allocations: 66803)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:28:35 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 2808ms (ActiveRecord: 2.9ms | Allocations: 10428)


  
NoMethodError (undefined method `create_movie' for SearchMovieService:Class

    movie = create_movie(response.body)
            ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:18:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 12:29:32 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 14.0ms | Allocations: 14464)
  Rendered layout layouts/application.html.erb (Duration: 97.6ms | Allocations: 61325)
Completed 200 OK in 103ms (Views: 96.5ms | ActiveRecord: 2.4ms | Allocations: 66685)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:29:36 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 85ms (ActiveRecord: 1.5ms | Allocations: 9834)


  
NoMethodError (undefined method `create_movie' for SearchMovieService:Class

    movie = create_movie(response.body)
            ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:19:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 12:32:11 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 8.4ms | Allocations: 7180)
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | Allocations: 25698)
Completed 200 OK in 19ms (Views: 15.7ms | ActiveRecord: 1.9ms | Allocations: 27415)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:32:14 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 3.6ms | Allocations: 6638)


  
NoMethodError (undefined method `create_movie' for SearchMovieService:Class

    movie = create_movie(response.body)
            ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:19:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 12:43:47 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 13.6ms | Allocations: 14464)
  Rendered layout layouts/application.html.erb (Duration: 96.3ms | Allocations: 61412)
Completed 200 OK in 103ms (Views: 95.6ms | ActiveRecord: 2.1ms | Allocations: 66772)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:43:50 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.5ms | Allocations: 10030)


  
NameError (undefined local variable or method `body' for SearchMovieService:Class

    movie_info = JSON.parse(body)
                            ^^^^):
  
app/services/search_movie_service.rb:26:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 12:44:18 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 8.5ms | Allocations: 7180)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 25724)
Completed 200 OK in 21ms (Views: 17.6ms | ActiveRecord: 1.7ms | Allocations: 27441)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:44:22 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "tt0015324"], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:28:in `search_by_imdb_id'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "tt0015324"], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "Sherlock Jr."], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
  [1m[36mMovie Create (1.9ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", "tt0015324"], ["title", "Sherlock Jr."], ["rating", "8.2"], ["rank", nil], ["year", 1924], ["data", nil], ["created_at", "2023-11-11 18:44:22.424151"], ["updated_at", "2023-11-11 18:44:22.424151"]]
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
Completed 406 Not Acceptable in 20ms (ActiveRecord: 6.5ms | Allocations: 10822)


  
ActionController::MissingExactTemplate (Api::V1::SearchMoviesController#search_movie_by_imdb_id is missing a template for request formats: text/html):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 12:44:22 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 3.6ms | Allocations: 4132)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 10372)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.2ms | Allocations: 10763)


Started GET "/movie/index?page=2" for ::1 at 2023-11-11 12:44:27 -0600
Processing by MovieController#index as HTML
  Parameters: {"page"=>"2"}
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 3]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 8.6ms | Allocations: 4919)
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | Allocations: 10902)
Completed 200 OK in 15ms (Views: 13.4ms | ActiveRecord: 0.5ms | Allocations: 11258)


Started GET "/movie/index?page=5" for ::1 at 2023-11-11 12:44:28 -0600
Processing by MovieController#index as HTML
  Parameters: {"page"=>"5"}
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 12]]
  â†³ app/views/movie/index.html.erb:29
  Rendered movie/index.html.erb within layouts/application (Duration: 9.2ms | Allocations: 3158)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | Allocations: 9161)
Completed 200 OK in 17ms (Views: 15.8ms | ActiveRecord: 0.5ms | Allocations: 9510)


Started GET "/movie/index?page=5" for ::1 at 2023-11-11 12:48:12 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Parameters: {"page"=>"5"}
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 12]]
  â†³ app/views/movie/index.html.erb:29
  Rendered movie/index.html.erb within layouts/application (Duration: 12.6ms | Allocations: 13558)
  Rendered layout layouts/application.html.erb (Duration: 95.9ms | Allocations: 60647)
Completed 200 OK in 102ms (Views: 95.2ms | ActiveRecord: 2.0ms | Allocations: 66005)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:48:16 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.5ms | Allocations: 9802)


  
NoMethodError (undefined method `find_or_initialize_movie' for SearchMovieService:Class

    find_or_initialize_movie(response.body)
    ^^^^^^^^^^^^^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:27:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:12:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index?page=5" for ::1 at 2023-11-11 12:49:13 -0600
Processing by MovieController#index as HTML
  Parameters: {"page"=>"5"}
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 12]]
  â†³ app/views/movie/index.html.erb:29
  Rendered movie/index.html.erb within layouts/application (Duration: 7.0ms | Allocations: 6560)
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | Allocations: 25098)
Completed 200 OK in 18ms (Views: 15.2ms | ActiveRecord: 1.5ms | Allocations: 26813)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 12:49:17 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."imdb_id" = $1 LIMIT $2[0m  [["imdb_id", "tt0015324"], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:28:in `search_by_imdb_id'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
  [1m[36mMovie Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 AND "movies"."id" != $2 LIMIT $3[0m  [["imdb_id", "tt0015324"], ["id", 13], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 AND "movies"."id" != $2 LIMIT $3[0m  [["title", "Sherlock Jr."], ["id", 13], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/search_movie_service.rb:35:in `search_by_imdb_id'
Completed 406 Not Acceptable in 14ms (ActiveRecord: 2.0ms | Allocations: 9899)


  
ActionController::MissingExactTemplate (Api::V1::SearchMoviesController#search_movie_by_imdb_id is missing a template for request formats: text/html):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index?page=5" for ::1 at 2023-11-11 12:49:17 -0600
Processing by MovieController#index as HTML
  Parameters: {"page"=>"5"}
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 12]]
  â†³ app/views/movie/index.html.erb:29
  Rendered movie/index.html.erb within layouts/application (Duration: 3.3ms | Allocations: 3294)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 9543)
Completed 200 OK in 10ms (Views: 9.6ms | ActiveRecord: 0.2ms | Allocations: 9932)


Started GET "/movie/index" for ::1 at 2023-11-11 12:49:20 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 13.2ms | Allocations: 4774)
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | Allocations: 10974)
Completed 200 OK in 20ms (Views: 17.9ms | ActiveRecord: 0.8ms | Allocations: 11350)


Started GET "/" for ::1 at 2023-11-11 13:34:49 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.3ms | Allocations: 1467)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 19670)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.0ms | Allocations: 20533)


Started GET "/" for ::1 at 2023-11-11 17:06:35 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2236)
  Rendered layout layouts/application.html.erb (Duration: 86.5ms | Allocations: 48806)
Completed 200 OK in 91ms (Views: 87.8ms | ActiveRecord: 0.0ms | Allocations: 53054)


Started POST "/auth/login" for ::1 at 2023-11-11 17:06:46 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ff7b258c508>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007ff7b258c508>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 362ms (ActiveRecord: 4.4ms | Allocations: 10362)


Started GET "/movie/index" for ::1 at 2023-11-11 17:06:46 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 10.7ms | Allocations: 11963)
  Rendered layout layouts/application.html.erb (Duration: 14.4ms | Allocations: 18224)
Completed 200 OK in 16ms (Views: 13.7ms | ActiveRecord: 1.6ms | Allocations: 19865)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 17:06:50 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 894ms (ActiveRecord: 0.1ms | Allocations: 5177)


  
NoMethodError (undefined method `save_movie' for SearchMovieService:Class

    save_movie response.body
    ^^^^^^^^^^
Did you mean?  search_movie):
  
app/services/search_movie_service.rb:25:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:14:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:09:37 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 13.9ms | Allocations: 14691)
  Rendered layout layouts/application.html.erb (Duration: 100.3ms | Allocations: 61665)
Completed 200 OK in 106ms (Views: 99.2ms | ActiveRecord: 2.4ms | Allocations: 67025)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 17:09:43 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 912ms (ActiveRecord: 1.6ms | Allocations: 10613)


  
NoMethodError (undefined method `create_movie_movie' for SearchMovieService:Class

    movie = create_movie_movie response.body
            ^^^^^^^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:25:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:14:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:10:03 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 7.8ms | Allocations: 7400)
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | Allocations: 25940)
Completed 200 OK in 20ms (Views: 16.5ms | ActiveRecord: 1.9ms | Allocations: 27657)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 17:10:06 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 316ms (ActiveRecord: 1.5ms | Allocations: 7347)


  
NoMethodError (undefined method `create_movie' for SearchMovieService:Class

    movie = create_movie response.body
            ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:25:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:14:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:11:29 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 9.9ms | Allocations: 7406)
  Rendered layout layouts/application.html.erb (Duration: 20.0ms | Allocations: 25933)
Completed 200 OK in 22ms (Views: 18.4ms | ActiveRecord: 2.3ms | Allocations: 27649)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 17:11:32 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 992ms (ActiveRecord: 3.5ms | Allocations: 7383)


  
NoMethodError (undefined method `create_movie' for SearchMovieService:Class

    movie = create_movie(response.body)
            ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:25:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:14:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:12:37 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 9.1ms | Allocations: 7402)
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | Allocations: 25932)
Completed 200 OK in 21ms (Views: 17.9ms | ActiveRecord: 1.9ms | Allocations: 27645)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 17:12:40 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 315ms (ActiveRecord: 2.4ms | Allocations: 7323)


  
NoMethodError (undefined method `create_movie' for SearchMovieService:Class

    create_movie(response.body)
    ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:25:in `search_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:14:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-11 17:22:00 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2215)
  Rendered layout layouts/application.html.erb (Duration: 80.7ms | Allocations: 48895)
Completed 200 OK in 85ms (Views: 82.0ms | ActiveRecord: 0.0ms | Allocations: 53143)


Started POST "/auth/login" for ::1 at 2023-11-11 17:22:07 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f7996a1add0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f7996a1add0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 401 Unauthorized in 189ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 9616)


Started POST "/auth/login" for ::1 at 2023-11-11 17:22:11 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f7996c40358>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f7996c40358>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 401 Unauthorized in 174ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1240)


Started POST "/auth/login" for ::1 at 2023-11-11 17:22:28 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f7996ae00a8>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f7996ae00a8>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 352ms (ActiveRecord: 0.2ms | Allocations: 3920)


Started GET "/movie/index" for ::1 at 2023-11-11 17:22:29 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 11.5ms | Allocations: 11964)
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 18247)
Completed 200 OK in 17ms (Views: 14.3ms | ActiveRecord: 1.6ms | Allocations: 19889)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-11 17:22:35 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 894ms (ActiveRecord: 0.1ms | Allocations: 3313)


  
JSON::ParserError (unexpected token at '<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <title>404 - IMDb API</title>

    
    

    <link href="/base/css/base.min.css?v=YRtPb6joIFF06HgJiSVp1uNxpgj6KVXucdEfD3kXybI" rel="stylesheet" />

    <link href="/css/site.min.css?v=n2govzq6yUtqc98Jdtb_klID7DNVIwHY_Le0j-TI_QA" rel="stylesheet" />
    

    <!--[if lt IE 9]>
        <script src="~/ie-support/html5shiv.min.js"></script>
        <script src="~/ie-support/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand text-en" href="/">
                    IMDb-API
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#basicExampleNav"
                        aria-controls="basicExampleNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse" id="basicExampleNav">
                    <ul class="navbar-nav flex-grow-1">

                        <li class="nav-item dropdown dmenu multi-level-dropdown">
                            <a href="#" data-toggle="dropdown" class="nav-link dropdown-toggle">
                                Information
                            </a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100" href="/film-rating-system">Film Rating System</a>
                                </li>
                                <li class="dropdown-divider dropdown-submenu p-0"></li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100" href="/top-250-movies">Top 250 Movies</a>
                                </li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100" href="/top-250-tvs">Top 250 Series TVs</a>
                                </li>

                                <li class="dropdown-divider p-0"></li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100" href="/most-popular-movies">Most Popular Movies</a>
                                </li>
                                <li class="dropdown-item dropdown-item p-0">
                                    <a class="w-100" href="/most-popular-tvs">Most Popular TVs</a>
                                </li>

                                <li class="dropdown-divider p-0"></li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100" href="/in-theaters">New Movies: In Theaters</a>
                                </li>
                                <li class="dropdown-item dropdown-item p-0">
                                    <a class="w-100" href="/coming-soon">New Movies: Coming Soon</a>
                                </li>

                                <li class="dropdown-divider dropdown-submenu p-0"></li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a href="#" data-toggle="dropdown" class="dropdown-toggle w-100">
                                        Box Office
                                    </a>
                                    <ul class="dropdown-menu ml-2 rounded-0 border-0 z-depth-1 l-100 r-auto">
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/box-office">Weekend</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/box-office-alltime">All Time</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a href="#" data-toggle="dropdown" class="dropdown-toggle w-100">
                                        Sources
                                    </a>
                                    <ul class="dropdown-menu ml-2 rounded-0 border-0 z-depth-1 l-100 r-auto">
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/imdb">IMDb</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/the-movie-db">TheMovieDb</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/wikipedia">Wikipedia</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/metacritic">Metacritic</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/rotten-tomatoes">Rotten Tomatoes</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/youtube">YouTube</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/netflix">Netflix</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/tv-guide">TV Guide</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/film-affinity">Film Affinity</a>
                                        </li>
                                        <li class="dropdown-item p-0">
                                            <a class="w-100" href="/intro/tv-com">TV.com</a>
                                        </li>
                                    </ul>
                                </li>

                            </ul>
                        </li>

                        <li class="nav-item dropdown dmenu multi-level-dropdown">
                            <a href="#" data-toggle="dropdown" class="nav-link dropdown-toggle">
                                Download
                            </a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100 font-weight-bold" href="/client">IMDb-API Client Download</a>
                                </li>
                                <li class="dropdown-divider dropdown-submenu p-0"></li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100" href="https://github.com/IMDb-API/IMDbApiLib" target="_blank">IMDbApiLib Github Source</a>
                                </li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100" href="https://www.nuget.org/packages/IMDbApiLib" target="_blank">IMDbApiLib Nuget Package</a>
                                </li>
                                <li class="dropdown-item dropdown-submenu p-0">
                                    <a class="w-100" href="https://github.com/IMDb-API/IMDbApiClient" target="_blank">IMDbApiClient Github Source</a>
                                </li>
                            </ul>
                        </li>

                            <li class="nav-item">
                                <a class="nav-link" href="/contact">Contact</a>
                            </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/pricing">Pricing</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link text-en" href="/api">API</a>
                        </li>
                    </ul>

                    

<ul class="navbar-nav">
        <li class="nav-item">
            <a rel="nofollow" class="nav-link" href="/Identity/Account/Register"><i class="fas fa-user-plus"></i>&nbsp;Register</a>
        </li>
        <li class="nav-item">
            <a rel="nofollow" class="nav-link" href="/Identity/Account/Login"><i class="fas fa-sign-in-alt"></i>&nbsp;Login</a>
        </li>
</ul>

                    



                </div>
            </div>
        </nav>

    </header>

    <div class="container mt-2">
        <main id="mainBody" role="main" class="pb-3">
            
<br />
<br />
<div class="wrap">
    <div class="logo">
        <h1 class="text-en text-extrablack mb-3">404</h1>
        <p class="text-extrabold">Sorry, an error has occurred. Requested page not found!</p>
        <div class="sub">
            <p><a href="/">Back to Home</a></p>
        </div>
    </div>
</div>


        </main>
    </div>



    <footer class="page-footer font-small unique-color-dark mt-4 pt-2 ">
            <div class="container text-center text-md-left">
                <div class="row">
                    <div class="col-md-2 mx-auto">
                        <h5 class="font-weight-bold text-uppercase mt-4">Navigation</h5>
                        <hr class="blue mb-4 mt-0 d-inline-block mx-auto" style="width: 100%;">
                        <ul class="list-unstyled">
                            <li><a href="/">Home</a></li>
                            <li><a href="/contact">Contact</a></li>
                            <li><a href="/pricing">Pricing</a></li>
                                <li><a href="/Identity/Account/Register">Register</a></li>
                                <li><a href="/Identity/Account/Login">Login</a></li>
                        </ul>
                    </div>

                    <hr class="clearfix w-100 d-md-none">
                    <div class="col-md-2 mx-auto">
                        <h5 class="font-weight-bold text-uppercase mt-4">Tools</h5>
                        <hr class="blue mb-4 mt-0 d-inline-block mx-auto" style="width: 100%;">
                        <ul class="list-unstyled">
                            <li><a href="/api">API</a></li>
                            <li><a href="/client">Client App</a></li>
                            <li><a href="/privacy">Privacy Policy</a></li>
                            <li><a href="/intro/terms">Terms of Service</a></li>
                        </ul>
                    </div>

                    <hr class="clearfix w-100 d-md-none">
                    <div class="col-md-6 mx-auto">
                            <h5 class="font-weight-bold text-uppercase mt-4">Top 10 Movies</h5>
                            <hr class="blue mb-4 mt-0 d-inline-block mx-auto" style="width: 100%;">
                            <p>
                                    <span>The Shawshank Redemption (1994)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>The Godfather (1972)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>The Godfather: Part II (1974)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>The Dark Knight (2008)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>12 Angry Men (1957)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>Schindler&#x27;s List (1993)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>The Lord of the Rings: The Return of the King (2003)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>Pulp Fiction (1994)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>The Good, the Bad and the Ugly (1966)</span>
                                        <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                    <span>The Lord of the Rings: The Fellowship of the Ring (2001)</span>
                            </p>
                    </div>

                    <hr class="clearfix w-100 d-md-none">
                    <div class="col-md-2 mx-auto text-center">
                        <h5 class="font-weight-bold text-uppercase mt-4">&nbsp;</h5>
                        <hr class="blue mb-4 mt-0 d-inline-block mx-auto" style="width: 100%;">
                        <a title="Customer reviews of imdb-api.com" href="https://www.webwiki.com/imdb-api.com"><img src="https://www.webwiki.com/etc/rating/widget/1321154584/imdb-api-com-rating-round-150.png" alt="Reviews of imdb-api.com" /></a>
                    </div>

                </div>
            </div>
            <hr>
            <ul class="list-unstyled list-inline text-center">
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Facebook"><a class="btn-floating btn-fb mx-1" href="https://www.facebook.com/imdbapicom" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Twitter"><a class="btn-floating btn-tw mx-1" href="https://twitter.com/imdb_api" target="_blank"><i class="fab fa-twitter"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="YouTube"><a class="btn-floating btn-yt mx-1" href="https://www.youtube.com/channel/UCimyxd8cgRHyiN-dy0aKtCQ"><i class="fab fa-youtube"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="LinkedIn"><a class="btn-floating btn-li mx-1" href="https://www.linkedin.com/in/haddad-dadban-1a0b4a9" target="_blank"><i class="fab fa-linkedin-in"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Instagram"><a class="btn-floating btn-ins mx-1" href="https://www.instagram.com/imdb_api" target="_blank"><i class="fab fa-instagram"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="GitHub"><a class="btn-floating btn-git mx-1" href="https://github.com/IMDb-API" target="_blank"><i class="fab fa-github"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Telegram"><a class="btn-floating btn-primary mx-1" href="https://t.me/imdb_api" target="_blank"><i class="fab fa-telegram-plane"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Pinterest"><a class="btn-floating btn-danger mx-1" href="https://www.pinterest.com/imdb_api" target="_blank"><i class="fab fa-pinterest"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Email"><a rel="nofollow" class="btn-floating btn-email mx-1" href="/cdn-cgi/l/email-protection#93e0e6e3e3fce1e7d3fafef7f1bef2e3fabdf0fcfe"><i class="fas fa-envelope"></i></a></li>
                <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Skype"><a rel="nofollow" class="btn-floating btn-primary mx-1" href="skype:haddad.dadban@outlook.com?userinfo" target="_blank"><i class="fab fa-skype"></i></a></li>
            </ul>
            <div class="footer-copyright text-center py-3 text-en ltr">
                &copy; 2023 All rights reserved. <span class="text-bold">IMDb-API</span>.
            </div>
    </footer>

    

    <!-- Modal -->
    <div class="modal fade" id="cookieConsentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <!-- Change class .modal-sm to change the size of the modal -->
        <div class="modal-dialog modal-full-height modal-bottom" role="document">
            <div class="modal-content">
                <div class="modal-body elegant-color p-0 m-0">
                    <div class="container">
                        <div id="cookieConsent" class="alert alert-dismissible fade show p-0 m-0" role="alert">
                            <div class="text-justify w-75 p-0 m-0" style="color:whitesmoke">
                                We use cookies to give you the best possible experience on our website.<a href="/privacy" class="btn btn-sm btn-link text-white">Learn more</a>
                            </div>
                            <button type="button" class="accept-policy close btn btn-light btn-sm" data-dismiss="modal" aria-label="Close" data-cookie-string=".AspNet.Consent=yes; expires=Sun, 10 Nov 2024 23:22:35 GMT; path=/; secure; samesite=none">
                                <span aria-hidden="true">&nbsp;&nbsp;Accept&nbsp;&nbsp;</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145113768-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-145113768-2');
    </script>

    <script src="/base/js/base.min.js?v=T_aQnbLBxyZrtU1UFY2aYSGmB9VNfI3shntSp1Eso_I"></script>
    <script src="/mdb/js/mdb.min.js"></script>
    <script src="/js/site.min.js?v=RSiwWpV0rRIXLpVYeTCxnzbQsQtGS-YrScMEfci19Jw"></script>
    
    <style>
        .wrap {
            margin: 0 auto;
            width: 100%;
        }

        .logo h1 {
            font-size: 140px;
            color: #FF7A00;
            text-align: center;
            margin-bottom: 1px;
            text-shadow: 4px 4px 1px white;
        }

        .logo p {
            color: #B1A18D;
            font-size: 20px;
            margin-top: 1px;
            text-align: center;
        }

            .logo p span {
                color: lightgreen;
            }

        .sub a {
            color: #ff7a00;
            text-decoration: none;
            padding: 5px;
            font-size: 13px;
            font-weight: bold;
        }
    </style>

</body>
</html>
'):
  
app/services/search_movie_service.rb:25:in `search_movie_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:14:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:30:51 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::DuplicateMigrationNameError (

Multiple migrations have the name CreateUsers.

):
  
activerecord (7.0.8) lib/active_record/migration.rb:1433:in `validate'
activerecord (7.0.8) lib/active_record/migration.rb:1306:in `initialize'
activerecord (7.0.8) lib/active_record/migration.rb:1184:in `new'
activerecord (7.0.8) lib/active_record/migration.rb:1184:in `open'
activerecord (7.0.8) lib/active_record/migration.rb:156:in `detailed_migration_message'
activerecord (7.0.8) lib/active_record/migration.rb:147:in `initialize'
activerecord (7.0.8) lib/active_record/migration.rb:662:in `exception'
activerecord (7.0.8) lib/active_record/migration.rb:662:in `raise'
activerecord (7.0.8) lib/active_record/migration.rb:662:in `check_pending!'
activerecord (7.0.8) lib/active_record/migration.rb:627:in `block (2 levels) in call'
activesupport (7.0.8) lib/active_support/file_update_checker.rb:83:in `execute'
activerecord (7.0.8) lib/active_record/migration.rb:632:in `block in call'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `synchronize'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/method_override.rb:24:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/movie/index" for ::1 at 2023-11-11 17:31:45 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb within layouts/application (Duration: 14.9ms | Allocations: 14344)
  Rendered layout layouts/application.html.erb (Duration: 93.9ms | Allocations: 61223)
Completed 200 OK in 101ms (Views: 93.3ms | ActiveRecord: 2.1ms | Allocations: 66596)


Started GET "/movie/search?title=The+Kid&commit=Search" for ::1 at 2023-11-11 17:31:55 -0600
Processing by MovieController#search as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Search"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."title" = $1 LIMIT $2[0m  [["title", "The Kid"], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:44:in `search'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 2.5ms | Allocations: 8768)


  
NoMethodError (undefined method `id' for nil:NilClass

    redirect_to "/movie/show/#{movie.id}"
                                    ^^^):
  
app/controllers/movie_controller.rb:45:in `search'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-11 17:32:16 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.4ms | Allocations: 1467)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | Allocations: 7601)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms | Allocations: 8468)


Started GET "/" for ::1 at 2023-11-11 17:32:16 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 0.8ms | Allocations: 670)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | Allocations: 6484)
Completed 200 OK in 5ms (Views: 5.2ms | ActiveRecord: 0.0ms | Allocations: 6785)


Started POST "/auth/login" for ::1 at 2023-11-11 17:32:25 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f7a4409fc20>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f7a4409fc20>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 350ms (ActiveRecord: 0.4ms | Allocations: 2429)


Started GET "/movie/index" for ::1 at 2023-11-11 17:32:25 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb within layouts/application (Duration: 3.7ms | Allocations: 3941)
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | Allocations: 10177)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.4ms | Allocations: 10633)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-11 17:32:35 -0600
Processing by Api::V1::SearchMoviesController#search_movie as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Sync movie"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 81ms (ActiveRecord: 0.4ms | Allocations: 3702)


  
NoMethodError (undefined method `update_movie' for SearchMovieService:Class

    update_movie(response.body)
    ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:11:in `search_movie'
app/controllers/api/v1/search_movies_controller.rb:8:in `search_movie'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:35:35 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb within layouts/application (Duration: 14.1ms | Allocations: 14350)
  Rendered layout layouts/application.html.erb (Duration: 90.7ms | Allocations: 61437)
Completed 200 OK in 96ms (Views: 89.8ms | ActiveRecord: 2.3ms | Allocations: 66810)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-11 17:35:45 -0600
Processing by Api::V1::SearchMoviesController#search_movie as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Sync movie"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 30ms (ActiveRecord: 4.9ms | Allocations: 9609)


  
NoMethodError (undefined method `update_movie' for SearchMovieService:Class

    update_movie(response.body)
    ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:11:in `search_movie'
app/controllers/api/v1/search_movies_controller.rb:8:in `search_movie'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:37:27 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb within layouts/application (Duration: 14.3ms | Allocations: 14350)
  Rendered layout layouts/application.html.erb (Duration: 93.5ms | Allocations: 61351)
Completed 200 OK in 99ms (Views: 92.6ms | ActiveRecord: 2.3ms | Allocations: 66724)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-11 17:37:36 -0600
Processing by Api::V1::SearchMoviesController#search_movie as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Sync movie"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 2.7ms | Allocations: 9600)


  
NoMethodError (undefined method `update_movie' for SearchMovieService:Class

    update_movie(response.body)
    ^^^^^^^^^^^^):
  
app/services/search_movie_service.rb:11:in `search_movie'
app/controllers/api/v1/search_movies_controller.rb:8:in `search_movie'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:38:23 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb within layouts/application (Duration: 9.8ms | Allocations: 7165)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 25711)
Completed 200 OK in 20ms (Views: 17.3ms | ActiveRecord: 1.8ms | Allocations: 27432)


Started GET "/api/v1/search?title=The+Kid&commit=Sync+movie" for ::1 at 2023-11-11 17:38:31 -0600
Processing by Api::V1::SearchMoviesController#search_movie as HTML
  Parameters: {"title"=>"The Kid", "commit"=>"Sync movie"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."imdb_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:13:in `search_movie'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/search_movie_service.rb:18:in `search_movie'
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:18:in `search_movie'
  [1m[36mMovie Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:18:in `search_movie'
  [1m[36mMovie Create (0.2ms)[0m  [1m[32mINSERT INTO "movies" ("imdb_id", "title", "rating", "rank", "year", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["imdb_id", nil], ["title", nil], ["rating", nil], ["rank", nil], ["year", nil], ["data", nil], ["created_at", "2023-11-11 23:38:34.316086"], ["updated_at", "2023-11-11 23:38:34.316086"]]
  â†³ app/services/search_movie_service.rb:18:in `search_movie'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/search_movie_service.rb:18:in `search_movie'
Completed 406 Not Acceptable in 2782ms (ActiveRecord: 5.0ms | Allocations: 11165)


  
ActionController::MissingExactTemplate (Api::V1::SearchMoviesController#search_movie is missing a template for request formats: text/html):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-11 17:38:34 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb within layouts/application (Duration: 3.8ms | Allocations: 3911)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | Allocations: 10168)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.3ms | Allocations: 10559)


Started GET "/movie/index" for ::1 at 2023-11-11 17:41:43 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:22
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:48
  Rendered movie/index.html.erb within layouts/application (Duration: 13.2ms | Allocations: 5687)
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | Allocations: 12220)
Completed 200 OK in 20ms (Views: 18.8ms | ActiveRecord: 0.5ms | Allocations: 13233)


Started GET "/" for ::1 at 2023-11-11 17:41:48 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.4ms | Allocations: 1461)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | Allocations: 7489)
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms | Allocations: 8348)


Started GET "/" for ::1 at 2023-11-11 17:42:03 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.2ms | Allocations: 1144)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | Allocations: 7360)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.0ms | Allocations: 8334)


Started GET "/" for ::1 at 2023-11-11 17:42:05 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.7ms | Allocations: 659)
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | Allocations: 6472)
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms | Allocations: 6752)


Started GET "/" for ::1 at 2023-11-11 17:42:07 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.6ms | Allocations: 668)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 6481)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.0ms | Allocations: 6743)


Started GET "/" for ::1 at 2023-11-11 17:45:30 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.7ms | Allocations: 1139)
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | Allocations: 7355)
Completed 200 OK in 11ms (Views: 9.6ms | ActiveRecord: 0.0ms | Allocations: 8282)


Started GET "/" for ::1 at 2023-11-11 17:46:36 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.5ms | Allocations: 1147)
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | Allocations: 7363)
Completed 200 OK in 14ms (Views: 12.5ms | ActiveRecord: 0.0ms | Allocations: 8308)


Started GET "/" for ::1 at 2023-11-11 17:48:38 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.9ms | Allocations: 1146)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | Allocations: 7466)
Completed 200 OK in 13ms (Views: 12.1ms | ActiveRecord: 0.0ms | Allocations: 8414)


Started GET "/" for ::1 at 2023-11-11 17:48:50 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 5.1ms | Allocations: 1157)
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | Allocations: 7485)
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms | Allocations: 8430)


Started GET "/" for ::1 at 2023-11-11 17:49:02 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.2ms | Allocations: 1154)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | Allocations: 7414)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms | Allocations: 8362)


Started GET "/" for ::1 at 2023-11-11 17:49:13 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.2ms | Allocations: 1132)
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | Allocations: 7348)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.0ms | Allocations: 8293)


Started GET "/" for ::1 at 2023-11-11 17:49:22 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.2ms | Allocations: 1147)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | Allocations: 7363)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.0ms | Allocations: 8311)


Started GET "/" for ::1 at 2023-11-11 17:49:51 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.1ms | Allocations: 1135)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | Allocations: 7351)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms | Allocations: 8296)


Started GET "/" for ::1 at 2023-11-11 17:50:36 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.0ms | Allocations: 1113)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 7329)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.0ms | Allocations: 8274)


Started GET "/" for ::1 at 2023-11-11 17:51:58 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.8ms | Allocations: 1135)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 7351)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms | Allocations: 8296)


Started GET "/" for ::1 at 2023-11-11 17:52:16 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.4ms | Allocations: 1149)
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | Allocations: 7469)
Completed 200 OK in 9ms (Views: 8.9ms | ActiveRecord: 0.0ms | Allocations: 8417)


Started GET "/" for ::1 at 2023-11-11 17:52:56 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2226)
  Rendered layout layouts/application.html.erb (Duration: 54.6ms | Allocations: 49014)
Completed 200 OK in 61ms (Views: 56.3ms | ActiveRecord: 0.0ms | Allocations: 53275)


Started GET "/" for ::1 at 2023-11-11 17:53:15 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 4.7ms | Allocations: 1135)
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | Allocations: 7353)
Completed 200 OK in 16ms (Views: 15.2ms | ActiveRecord: 0.0ms | Allocations: 8332)


Started GET "/" for ::1 at 2023-11-12 09:35:15 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2063)
  Rendered layout layouts/application.html.erb (Duration: 92.6ms | Allocations: 48751)
Completed 200 OK in 99ms (Views: 94.4ms | ActiveRecord: 0.0ms | Allocations: 52999)


Started POST "/auth/login" for ::1 at 2023-11-12 09:35:26 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f0f649cebc0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f0f649cebc0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 357ms (ActiveRecord: 4.6ms | Allocations: 10479)


Started GET "/movie/index" for ::1 at 2023-11-12 09:35:26 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.8ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 12.4ms | Allocations: 11965)
  Rendered layout layouts/application.html.erb (Duration: 16.0ms | Allocations: 18195)
Completed 200 OK in 18ms (Views: 13.3ms | ActiveRecord: 3.3ms | Allocations: 19836)


Started GET "/movie/new" for ::1 at 2023-11-12 09:35:32 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/new.html.erb within layouts/application (Duration: 7.2ms | Allocations: 2533)
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | Allocations: 2626)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.7ms | Allocations: 4409)


  
ActionView::Template::Error (Missing partial movie/_unauthorized, application/_unauthorized with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/home/miguel/films_imdb/app/views"
  * "/home/miguel/.rbenv/versions/3.1.4/lib/ruby/gems/3.1.0/gems/kaminari-core-1.2.2/app/views"
  * "/home/miguel/.rbenv/versions/3.1.4/lib/ruby/gems/3.1.0/gems/turbo-rails-1.5.0/app/views"
  * "/home/miguel/.rbenv/versions/3.1.4/lib/ruby/gems/3.1.0/gems/actiontext-7.0.8/app/views"
  * "/home/miguel/.rbenv/versions/3.1.4/lib/ruby/gems/3.1.0/gems/actionmailbox-7.0.8/app/views"

Did you mean?  kaminari/paginator
               kaminari/last_page
               kaminari/next_page
               kaminari/gap
               kaminari/first_page
               kaminari/page):
    1: <%  render "unauthorized" unless user_is_admin?(@current_user)%>
    2: 
    3: <div class="container">
    4:   <div class="row justify-content-center">
  
app/views/movie/new.html.erb:1
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/new" for ::1 at 2023-11-12 09:37:19 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/_unauthorized.html.erb (Duration: 0.4ms | Allocations: 121)
  Rendered movie/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2124)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 8442)
Completed 200 OK in 16ms (Views: 11.5ms | ActiveRecord: 0.4ms | Allocations: 10324)


Started GET "/" for ::1 at 2023-11-12 09:37:29 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.1ms | Allocations: 1115)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | Allocations: 7128)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.0ms | Allocations: 7808)


Started POST "/auth/login" for ::1 at 2023-11-12 09:37:40 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f0f4d55dd00>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f0f4d55dd00>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 350ms (ActiveRecord: 0.2ms | Allocations: 1776)


Started GET "/movie/index" for ::1 at 2023-11-12 09:37:40 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 6.4ms | Allocations: 5804)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | Allocations: 11882)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.4ms | Allocations: 12377)


Started GET "/movie/new" for ::1 at 2023-11-12 09:37:42 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/_unauthorized.html.erb (Duration: 0.1ms | Allocations: 11)
  Rendered movie/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 1136)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | Allocations: 6949)
Completed 200 OK in 15ms (Views: 10.6ms | ActiveRecord: 0.5ms | Allocations: 8006)


Started GET "/" for ::1 at 2023-11-12 09:40:29 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2248)
  Rendered layout layouts/application.html.erb (Duration: 81.5ms | Allocations: 48861)
Completed 200 OK in 87ms (Views: 83.5ms | ActiveRecord: 0.0ms | Allocations: 53109)


Started POST "/auth/login" for ::1 at 2023-11-12 09:40:39 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f822f469ea8>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f822f469ea8>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 357ms (ActiveRecord: 2.5ms | Allocations: 10407)


Started GET "/movie/index" for ::1 at 2023-11-12 09:40:39 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 11.0ms | Allocations: 11963)
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | Allocations: 18249)
Completed 200 OK in 16ms (Views: 13.5ms | ActiveRecord: 1.7ms | Allocations: 19890)


Started GET "/movie/new" for ::1 at 2023-11-12 09:40:41 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/_unauthorized.html.erb (Duration: 0.6ms | Allocations: 120)
  Rendered movie/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 790)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 6743)
Completed 200 OK in 16ms (Views: 9.5ms | ActiveRecord: 0.8ms | Allocations: 8558)


Started GET "/" for ::1 at 2023-11-12 09:43:25 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2248)
  Rendered layout layouts/application.html.erb (Duration: 80.0ms | Allocations: 48995)
Completed 200 OK in 84ms (Views: 81.2ms | ActiveRecord: 0.0ms | Allocations: 53243)


Started POST "/auth/login" for ::1 at 2023-11-12 09:43:33 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4ef0661d40>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4ef0661d40>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 356ms (ActiveRecord: 2.3ms | Allocations: 10444)


Started GET "/movie/index" for ::1 at 2023-11-12 09:43:34 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 11.9ms | Allocations: 11981)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | Allocations: 18237)
Completed 200 OK in 17ms (Views: 14.7ms | ActiveRecord: 1.6ms | Allocations: 19878)


Started GET "/movie/new" for ::1 at 2023-11-12 09:43:35 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 564)
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | Allocations: 6518)
Completed 200 OK in 18ms (Views: 10.7ms | ActiveRecord: 0.6ms | Allocations: 8338)


Started GET "/" for ::1 at 2023-11-12 09:48:54 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.6ms | Allocations: 1141)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | Allocations: 7359)
Completed 200 OK in 11ms (Views: 9.5ms | ActiveRecord: 0.0ms | Allocations: 8300)


Started POST "/auth/login" for ::1 at 2023-11-12 09:49:02 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4eed83b420>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4eed83b420>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 346ms (ActiveRecord: 0.2ms | Allocations: 1776)


Started GET "/movie/index" for ::1 at 2023-11-12 09:49:02 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 5.7ms | Allocations: 6058)
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | Allocations: 12296)
Completed 200 OK in 10ms (Views: 9.6ms | ActiveRecord: 0.4ms | Allocations: 13112)


Started GET "/movie/new" for ::1 at 2023-11-12 09:49:04 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/new.html.erb within layouts/application (Duration: 1.7ms | Allocations: 516)
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | Allocations: 6331)
Completed 200 OK in 14ms (Views: 10.1ms | ActiveRecord: 0.5ms | Allocations: 7491)


Started GET "/movie/new" for ::1 at 2023-11-12 09:49:58 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 648)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | Allocations: 6881)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 0.2ms | Allocations: 8585)


Started GET "/movie/index" for ::1 at 2023-11-12 09:49:59 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 8.3ms | Allocations: 5845)
  Rendered layout layouts/application.html.erb (Duration: 12.2ms | Allocations: 11870)
Completed 200 OK in 13ms (Views: 11.8ms | ActiveRecord: 0.8ms | Allocations: 12303)


Started GET "/" for ::1 at 2023-11-12 09:50:17 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.0ms | Allocations: 1135)
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | Allocations: 7244)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms | Allocations: 7901)


Started POST "/auth/login" for ::1 at 2023-11-12 09:50:27 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4ef0780460>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f4ef0780460>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"admin@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 345ms (ActiveRecord: 0.2ms | Allocations: 1767)


Started GET "/movie/index" for ::1 at 2023-11-12 09:50:27 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 3.7ms | Allocations: 4149)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | Allocations: 10149)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.3ms | Allocations: 10571)


Started GET "/movie/new" for ::1 at 2023-11-12 09:50:28 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/new.html.erb within layouts/application (Duration: 2.7ms | Allocations: 1253)
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | Allocations: 7067)
Completed 200 OK in 16ms (Views: 11.2ms | ActiveRecord: 0.5ms | Allocations: 8154)


Started GET "/movie/index" for ::1 at 2023-11-12 09:50:35 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 5.1ms | Allocations: 3980)
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | Allocations: 10064)
Completed 200 OK in 10ms (Views: 9.4ms | ActiveRecord: 0.3ms | Allocations: 10415)


Started GET "/movie/new" for ::1 at 2023-11-12 09:50:48 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 1764)
  Rendered layout layouts/application.html.erb (Duration: 7.9ms | Allocations: 7987)
Completed 200 OK in 11ms (Views: 8.8ms | ActiveRecord: 0.3ms | Allocations: 9730)


Started GET "/movie/index" for ::1 at 2023-11-12 09:50:53 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 8.2ms | Allocations: 5803)
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | Allocations: 11843)
Completed 200 OK in 13ms (Views: 12.1ms | ActiveRecord: 0.6ms | Allocations: 12280)


Started GET "/movie/new" for ::1 at 2023-11-12 09:51:03 -0600
Processing by MovieController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering movie/new.html.erb within layouts/application
  Rendered movie/new.html.erb within layouts/application (Duration: 2.1ms | Allocations: 1759)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 7975)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 0.3ms | Allocations: 9737)


Started GET "/movie/index" for ::1 at 2023-11-12 09:51:05 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 9.3ms | Allocations: 5792)
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | Allocations: 11838)
Completed 200 OK in 15ms (Views: 13.4ms | ActiveRecord: 0.5ms | Allocations: 12271)


Started GET "/" for ::1 at 2023-11-12 09:54:03 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2239)
  Rendered layout layouts/application.html.erb (Duration: 80.2ms | Allocations: 48869)
Completed 200 OK in 86ms (Views: 82.4ms | ActiveRecord: 0.0ms | Allocations: 53117)


Started POST "/auth/login" for ::1 at 2023-11-12 09:54:22 -0600
Processing by AuthenticationController#authenticate as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login"}
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f5b56b80ed0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
[31mUnpermitted parameters: :authenticity_token, :commit. Context: { controller: AuthenticationController, action: authenticate, request: #<ActionDispatch::Request:0x00007f5b56b80ed0>, params: {"authenticity_token"=>"[FILTERED]", "email"=>"user1@mail.com", "password"=>"[FILTERED]", "commit"=>"Login", "controller"=>"authentication", "action"=>"authenticate"} }[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Redirected to http://localhost:3000/movie/index
Completed 302 Found in 357ms (ActiveRecord: 1.9ms | Allocations: 10432)


Started GET "/movie/index" for ::1 at 2023-11-12 09:54:22 -0600
Processing by MovieController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 11.4ms | Allocations: 11963)
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 18213)
Completed 200 OK in 17ms (Views: 14.0ms | ActiveRecord: 1.6ms | Allocations: 19854)


Started GET "/movie/edit/1" for ::1 at 2023-11-12 09:54:25 -0600
Processing by MovieController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.6ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:11:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering movie/edit.html.erb within layouts/application
  Rendered movie/edit.html.erb within layouts/application (Duration: 1.3ms | Allocations: 586)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 6511)
Completed 200 OK in 17ms (Views: 7.9ms | ActiveRecord: 1.0ms | Allocations: 8946)


Started GET "/movie/index" for ::1 at 2023-11-12 09:54:27 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 5.8ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | Allocations: 10114)
Completed 200 OK in 12ms (Views: 10.0ms | ActiveRecord: 0.9ms | Allocations: 10484)


Started GET "/movie/delete/1" for ::1 at 2023-11-12 09:54:30 -0600
Processing by MovieController#delete as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.5ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:35:in `delete'
  Rendering layout layouts/application.html.erb
  Rendering movie/delete.html.erb within layouts/application
  Rendered movie/delete.html.erb within layouts/application (Duration: 2.1ms | Allocations: 498)
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | Allocations: 6304)
Completed 200 OK in 17ms (Views: 10.7ms | ActiveRecord: 1.1ms | Allocations: 7901)


Started GET "/movie/index" for ::1 at 2023-11-12 09:54:33 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 5.1ms | Allocations: 3981)
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | Allocations: 9960)
Completed 200 OK in 10ms (Views: 8.9ms | ActiveRecord: 0.4ms | Allocations: 10311)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-12 09:54:45 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 0.2ms | Allocations: 2161)


  
JSON::ParserError (unexpected token at '<h1>Bad Message 400</h1><pre>reason: Ambiguous URI empty segment</pre>'):
  
app/services/search_movie_service.rb:22:in `search_movie_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:14:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/delete/1" for ::1 at 2023-11-12 09:54:53 -0600
Processing by MovieController#delete as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:35:in `delete'
  Rendering layout layouts/application.html.erb
  Rendering movie/delete.html.erb within layouts/application
  Rendered movie/delete.html.erb within layouts/application (Duration: 0.2ms | Allocations: 77)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | Allocations: 6101)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.3ms | Allocations: 7807)


Started GET "/movie/delete/1" for ::1 at 2023-11-12 09:54:53 -0600
Processing by MovieController#delete as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.1ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/movie_controller.rb:35:in `delete'
  Rendering layout layouts/application.html.erb
  Rendering movie/delete.html.erb within layouts/application
  Rendered movie/delete.html.erb within layouts/application (Duration: 0.1ms | Allocations: 60)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 5969)
Completed 200 OK in 8ms (Views: 6.5ms | ActiveRecord: 0.3ms | Allocations: 7503)


Started GET "/movie/index" for ::1 at 2023-11-12 09:54:55 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 11.4ms | Allocations: 4117)
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 10132)
Completed 200 OK in 18ms (Views: 16.8ms | ActiveRecord: 1.0ms | Allocations: 10493)


Started GET "/movie/index" for ::1 at 2023-11-12 09:55:19 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 14.3ms | Allocations: 14684)
  Rendered layout layouts/application.html.erb (Duration: 97.8ms | Allocations: 61633)
Completed 200 OK in 103ms (Views: 96.7ms | ActiveRecord: 2.5ms | Allocations: 66993)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-12 09:55:23 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  [1m[36mMovie Load (0.4ms)[0m  [1m[34mSELECT "movies".* FROM "movies" WHERE "movies"."imdb_id" = $1 AND "movies"."title" = $2 AND "movies"."rating" = $3 AND "movies"."rank" IS NULL AND "movies"."year" = $4 LIMIT $5[0m  [["imdb_id", "tt0015324"], ["title", "Sherlock Jr."], ["rating", "8.2"], ["year", 1924], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:24:in `search_movie_by_imdb_id'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/search_movie_service.rb:27:in `search_movie_by_imdb_id'
  [1m[36mMovie Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."imdb_id" = $1 AND "movies"."id" != $2 LIMIT $3[0m  [["imdb_id", "tt0015324"], ["id", 13], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:27:in `search_movie_by_imdb_id'
  [1m[36mMovie Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "movies" WHERE "movies"."title" = $1 AND "movies"."id" != $2 LIMIT $3[0m  [["title", "Sherlock Jr."], ["id", 13], ["LIMIT", 1]]
  â†³ app/services/search_movie_service.rb:27:in `search_movie_by_imdb_id'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/search_movie_service.rb:27:in `search_movie_by_imdb_id'
Completed 406 Not Acceptable in 57ms (ActiveRecord: 2.6ms | Allocations: 13008)


  
ActionController::MissingExactTemplate (Api::V1::SearchMoviesController#search_movie_by_imdb_id is missing a template for request formats: text/html):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/movie/index" for ::1 at 2023-11-12 09:55:23 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 4.7ms | Allocations: 4219)
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | Allocations: 10458)
Completed 200 OK in 9ms (Views: 8.8ms | ActiveRecord: 0.3ms | Allocations: 10859)


Started GET "/movie/index?page=5" for ::1 at 2023-11-12 09:55:26 -0600
Processing by MovieController#index as HTML
  Parameters: {"page"=>"5"}
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.3ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 12]]
  â†³ app/views/movie/index.html.erb:29
  Rendered movie/index.html.erb within layouts/application (Duration: 10.0ms | Allocations: 3669)
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | Allocations: 9661)
Completed 200 OK in 18ms (Views: 16.8ms | ActiveRecord: 0.3ms | Allocations: 10017)


Started GET "/movie/index" for ::1 at 2023-11-12 09:55:27 -0600
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 6.1ms | Allocations: 3990)
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | Allocations: 9970)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.6ms | Allocations: 10330)


Started GET "/movie/index" for ::1 at 2023-11-12 09:57:40 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MovieController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering movie/index.html.erb within layouts/application
  [1m[36mMovie Load (0.2ms)[0m  [1m[34mSELECT "movies".* FROM "movies" LIMIT $1 OFFSET $2[0m  [["LIMIT", 3], ["OFFSET", 0]]
  â†³ app/views/movie/index.html.erb:29
  [1m[36mMovie Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "movies"[0m
  â†³ app/views/movie/index.html.erb:55
  Rendered movie/index.html.erb within layouts/application (Duration: 15.1ms | Allocations: 14684)
  Rendered layout layouts/application.html.erb (Duration: 98.7ms | Allocations: 61459)
Completed 200 OK in 105ms (Views: 97.9ms | ActiveRecord: 2.4ms | Allocations: 66819)


Started GET "/api/v1/search_by_imdb_id?imdb_id=tt0015324&commit=Search" for ::1 at 2023-11-12 09:57:43 -0600
Processing by Api::V1::SearchMoviesController#search_movie_by_imdb_id as HTML
  Parameters: {"imdb_id"=>"tt0015324", "commit"=>"Search"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.4ms | Allocations: 9908)


  
NoMethodError (undefined method `save_movie' for SearchMovieService:Class

    save_movie(response.body)
    ^^^^^^^^^^
Did you mean?  search_movie):
  
app/services/search_movie_service.rb:22:in `search_movie_by_imdb_id'
app/controllers/api/v1/search_movies_controller.rb:14:in `search_movie_by_imdb_id'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-12 10:17:51 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 8.7ms | Allocations: 6717)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 6827)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms | Allocations: 11025)


  
ActionView::Template::Error (undefined local variable or method `new_users' for #<ActionView::Base:0x0000000000e1a0>

   link_to "Signup", new_users 
                     ^^^^^^^^^
Did you mean?  new_users_url):
    14:     <%= login_form.submit "Login", class: "btn btn-primary"%>
    15:  
    16:   <% end %>
    17:   <% link_to "Signup", new_users %>
    18:   </div>
  
app/views/authentication/login.html.erb:17
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-12 10:18:25 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.4ms | Allocations: 1275)
  Rendered layout layouts/application.html.erb (Duration: 37.1ms | Allocations: 47928)
Completed 200 OK in 39ms (Views: 38.2ms | ActiveRecord: 0.0ms | Allocations: 48913)


Started GET "/" for ::1 at 2023-11-12 10:19:05 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 0.8ms | Allocations: 735)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | Allocations: 6551)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms | Allocations: 6835)


Started GET "/" for ::1 at 2023-11-12 10:20:39 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 4.9ms | Allocations: 1225)
  Rendered layout layouts/application.html.erb (Duration: 9.7ms | Allocations: 7550)
Completed 200 OK in 11ms (Views: 10.6ms | ActiveRecord: 0.0ms | Allocations: 8484)


Started GET "/" for ::1 at 2023-11-12 10:20:40 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.5ms | Allocations: 720)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | Allocations: 6536)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms | Allocations: 6819)


Started GET "/" for ::1 at 2023-11-12 10:20:41 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.1ms | Allocations: 738)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | Allocations: 6551)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms | Allocations: 6813)


Started GET "/" for ::1 at 2023-11-12 10:53:10 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2418)
  Rendered layout layouts/application.html.erb (Duration: 85.6ms | Allocations: 48956)
Completed 200 OK in 91ms (Views: 86.9ms | ActiveRecord: 0.0ms | Allocations: 53204)


Started GET "/" for ::1 at 2023-11-12 10:53:13 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 0.8ms | Allocations: 726)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | Allocations: 6545)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms | Allocations: 6849)


Started GET "/" for ::1 at 2023-11-12 10:53:13 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.1ms | Allocations: 720)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 6536)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms | Allocations: 6801)


Started GET "/" for ::1 at 2023-11-12 10:53:43 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.4ms | Allocations: 1226)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 7444)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms | Allocations: 8402)


Started GET "/" for ::1 at 2023-11-12 10:53:44 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.7ms | Allocations: 735)
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 6551)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.0ms | Allocations: 6834)


Started GET "/" for ::1 at 2023-11-12 10:53:45 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.7ms | Allocations: 727)
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | Allocations: 6542)
Completed 200 OK in 12ms (Views: 11.8ms | ActiveRecord: 0.0ms | Allocations: 6804)


Started GET "/" for ::1 at 2023-11-12 10:54:19 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.5ms | Allocations: 1229)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | Allocations: 7445)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms | Allocations: 8378)


Started GET "/" for ::1 at 2023-11-12 10:54:46 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.1ms | Allocations: 1232)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 7448)
Completed 200 OK in 7ms (Views: 6.9ms | ActiveRecord: 0.0ms | Allocations: 8396)


Started GET "/users/signup" for ::1 at 2023-11-12 10:54:53 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 16.4ms | Allocations: 11931)
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | Allocations: 12028)
Completed 500 Internal Server Error in 29ms (ActiveRecord: 2.8ms | Allocations: 21982)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass

      convert_to_model(record_or_class).model_name
                                       ^^^^^^^^^^^):
    1: <div class="container-sm">
    2:   <% simple_form_for @user do |f| %>
    3:     <% f.input :email %>
    4:     <% f.input :password %>
    5:   <% end %>
  
app/views/users/new.html.erb:2
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for ::1 at 2023-11-12 10:56:17 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 2670)
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | Allocations: 20966)
Completed 200 OK in 21ms (Views: 14.8ms | ActiveRecord: 1.7ms | Allocations: 26340)


Started GET "/users/signup" for ::1 at 2023-11-12 10:56:24 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.2ms | Allocations: 1613)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 7426)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.2ms | Allocations: 8617)


Started GET "/users/signup" for ::1 at 2023-11-12 10:56:54 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.7ms | Allocations: 2034)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | Allocations: 8250)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 0.2ms | Allocations: 10017)


Started GET "/users/signup" for ::1 at 2023-11-12 10:56:55 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1614)
  Rendered layout layouts/application.html.erb (Duration: 11.6ms | Allocations: 7427)
Completed 200 OK in 16ms (Views: 12.2ms | ActiveRecord: 0.5ms | Allocations: 8643)


Started GET "/users/signup" for ::1 at 2023-11-12 10:57:18 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.8ms | Allocations: 1614)
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | Allocations: 7427)
Completed 200 OK in 12ms (Views: 9.6ms | ActiveRecord: 0.3ms | Allocations: 8452)


Started GET "/users/signup" for ::1 at 2023-11-12 10:57:19 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 1613)
  Rendered layout layouts/application.html.erb (Duration: 12.3ms | Allocations: 7428)
Completed 200 OK in 16ms (Views: 13.0ms | ActiveRecord: 0.3ms | Allocations: 8480)


Started GET "/" for ::1 at 2023-11-12 10:57:30 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.3ms | Allocations: 1256)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | Allocations: 7275)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms | Allocations: 8129)


Started GET "/users/signup" for ::1 at 2023-11-12 10:57:32 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.3ms | Allocations: 1710)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 7523)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.1ms | Allocations: 8689)


Started GET "/users/signup" for ::1 at 2023-11-12 10:57:57 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.1ms | Allocations: 1339)


  
ActionController::MissingExactTemplate (UsersController#new is missing a template for request formats: text/html):
  
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for ::1 at 2023-11-12 10:58:43 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 2038)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | Allocations: 8358)
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 0.2ms | Allocations: 10082)


Started GET "/users/signup" for ::1 at 2023-11-12 10:59:54 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2029)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | Allocations: 8245)
Completed 200 OK in 15ms (Views: 11.4ms | ActiveRecord: 0.4ms | Allocations: 10105)


Started GET "/users/signup" for ::1 at 2023-11-12 11:14:46 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 0.9ms | Allocations: 913)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 1024)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 2.1ms | Allocations: 14760)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="container-sm">
  <div class="row justify-content-center">
      <h4 class="mt-4 mb-4 display-4">Signup</h4>
  </div>
  <%= simple_form_for @user do |f| %>
    <%= f.input :name %>
    <%= f.input :email, as: :email%>
    <%= f.input :password, as: :password %>
    <%= f.input :password_confirmation, as: :password %>
    <%= f.input :role, collection: ['user', 'admin'] %>
    <%= f.input :active as: :boolean, checked_value: 'true', unchecked_value: 'false'  %>
    <%= f.button :submit%>
  <% end %>
</div>
):
1:    <div class="container-sm">
2:      <div class="row justify-content-center">
3:          <h4 class="mt-4 mb-4 display-4">Signup</h4>
4:      </div>
5:      <%= simple_form_for @user do |f| %>
6:        <%= f.input :name %>
7:        <%= f.input :email, as: :email%>
8:        <%= f.input :password, as: :password %>
9:        <%= f.input :password_confirmation, as: :password %>
10:        <%= f.input :role, collection: ['user', 'admin'] %>
11:        <%= f.input :active as: :boolean, checked_value: 'true', unchecked_value: 'false'  %>
12:        <%= f.button :submit%>
13:      <% end %>
14:    </div>
  
app/views/users/new.html.erb:11: syntax error, unexpected local variable or method, expecting ')'
app/views/users/new.html.erb:11: syntax error, unexpected ',', expecting ')'
app/views/users/new.html.erb:11: syntax error, unexpected local variable or method, expecting ')'
app/views/users/new.html.erb:11: syntax error, unexpected ',', expecting ')'
app/views/users/new.html.erb:11: syntax error, unexpected local variable or method, expecting ')'
app/views/users/new.html.erb:11: syntax error, unexpected ',', expecting ')'
app/views/users/new.html.erb:11: syntax error, unexpected local variable or method, expecting ')'
app/views/users/new.html.erb:11: syntax error, unexpected ',', expecting ')'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for ::1 at 2023-11-12 11:15:43 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 21.4ms | Allocations: 15000)
  Rendered layout layouts/application.html.erb (Duration: 64.3ms | Allocations: 61774)
Completed 200 OK in 67ms (Views: 65.3ms | ActiveRecord: 0.2ms | Allocations: 63697)


Started GET "/users/signup" for ::1 at 2023-11-12 11:17:36 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 0.5ms | Allocations: 382)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | Allocations: 472)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.3ms | Allocations: 2367)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="container-sm">
  <div class="row justify-content-center">
      <h4 class="mt-4 mb-4 display-4">Signup</h4>
  </div>
  <%= simple_form_for @user do |f| %>
    <%= f.input :name, :required: false %>
    <%= f.input :email, as: :email%>
    <%= f.input :password, as: :password %>
    <%= f.input :password_confirmation, as: :password %>
    <%= f.input :role, collection: ['user', 'admin'] %>
    <%= f.input :active, as: :boolean, checked_value: 'true', unchecked_value: 'false'  %>
    <%= f.button :submit%>
  <% end %>
</div>
):
1:    <div class="container-sm">
2:      <div class="row justify-content-center">
3:          <h4 class="mt-4 mb-4 display-4">Signup</h4>
4:      </div>
5:      <%= simple_form_for @user do |f| %>
6:        <%= f.input :name, :required: false %>
7:        <%= f.input :email, as: :email%>
8:        <%= f.input :password, as: :password %>
9:        <%= f.input :password_confirmation, as: :password %>
10:        <%= f.input :role, collection: ['user', 'admin'] %>
11:        <%= f.input :active, as: :boolean, checked_value: 'true', unchecked_value: 'false'  %>
12:        <%= f.button :submit%>
13:      <% end %>
14:    </div>
  
app/views/users/new.html.erb:6: syntax error, unexpected ':', expecting ')'
app/views/users/new.html.erb:6: syntax error, unexpected ':', expecting ')'
app/views/users/new.html.erb:6: syntax error, unexpected ':', expecting ')'
app/views/users/new.html.erb:6: syntax error, unexpected ':', expecting ')'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for ::1 at 2023-11-12 11:18:04 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 4412)
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | Allocations: 10729)
Completed 200 OK in 12ms (Views: 9.6ms | ActiveRecord: 0.3ms | Allocations: 12623)


Started POST "/users" for ::1 at 2023-11-12 11:19:05 -0600
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user", "email"=>"user25", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User"}
[31mUnpermitted parameters: :authenticity_token, :user, :commit. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fcaa4b92b68>, params: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user", "email"=>"user25", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User", "controller"=>"users", "action"=>"create"} }[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 2988)


Started POST "/users" for ::1 at 2023-11-12 11:22:26 -0600
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user", "email"=>"user25", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User"}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 3874)


  
NameError (uninitialized constant UsersController::RecordInvalid

    rescue RecordInvalid
           ^^^^^^^^^^^^^):
  
app/controllers/users_controller.rb:14:in `rescue in create'
app/controllers/users_controller.rb:12:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/" for ::1 at 2023-11-12 11:23:12 -0600
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 1.3ms | Allocations: 1444)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | Allocations: 19753)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms | Allocations: 20618)


Started GET "/users/signup" for ::1 at 2023-11-12 11:23:14 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 4326)
  Rendered layout layouts/application.html.erb (Duration: 8.4ms | Allocations: 10337)
Completed 200 OK in 25ms (Views: 9.4ms | ActiveRecord: 2.8ms | Allocations: 15668)


Started POST "/users" for ::1 at 2023-11-12 11:23:38 -0600
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user", "email"=>"user25", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User"}
Completed 422 Unprocessable Entity in 178ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 1297)


Started GET "/users/signup" for ::1 at 2023-11-12 11:34:10 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 11.3ms | Allocations: 13169)
  Rendered layout layouts/application.html.erb (Duration: 94.6ms | Allocations: 59505)
Completed 200 OK in 109ms (Views: 95.9ms | ActiveRecord: 2.0ms | Allocations: 73194)


Started POST "/users" for ::1 at 2023-11-12 11:34:39 -0600
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user", "email"=>"user25@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Create (2.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "test user"], ["email", "user25@mail.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-11-12 17:34:39.991600"], ["updated_at", "2023-11-12 17:34:39.991600"]]
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user25@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user25@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
Completed 201 Created in 517ms (Views: 0.3ms | ActiveRecord: 4.9ms | Allocations: 5095)


Started GET "/users/signup" for ::1 at 2023-11-12 11:39:17 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 4613)
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | Allocations: 22917)
Completed 200 OK in 20ms (Views: 12.9ms | ActiveRecord: 1.8ms | Allocations: 28703)


Started POST "/users" for ::1 at 2023-11-12 11:39:50 -0600
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user 23", "email"=>"user23@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "test user 23"], ["email", "user23@mail.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-11-12 17:39:51.080716"], ["updated_at", "2023-11-12 17:39:51.080716"]]
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
Completed 500 Internal Server Error in 185ms (ActiveRecord: 3.1ms | Allocations: 7744)


  
NameError (undefined local variable or method `user' for #<UsersController:0x00000000013600>

    AuthenticateUser.new(user.email, user.password).call
                         ^^^^
Did you mean?  @user):
  
app/controllers/users_controller.rb:17:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for ::1 at 2023-11-12 11:40:16 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 4327)
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | Allocations: 22524)
Completed 200 OK in 21ms (Views: 14.2ms | ActiveRecord: 1.9ms | Allocations: 27873)


Started POST "/users" for ::1 at 2023-11-12 11:40:35 -0600
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user 23", "email"=>"user23@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "test user 23"], ["email", "user23@mail.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-11-12 17:40:36.180665"], ["updated_at", "2023-11-12 17:40:36.180665"]]
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user23@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user23@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/success.html.erb within layouts/application
  Rendered users/success.html.erb within layouts/application (Duration: 2.9ms | Allocations: 3948)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | Allocations: 4029)
Completed 500 Internal Server Error in 531ms (ActiveRecord: 3.3ms | Allocations: 10232)


  
ActionView::Template::Error (undefined local variable or method `user' for #<ActionView::Base:0x00000000018420>

  <p>'.freeze;@output_buffer.append=( user.email);@output_buffer.safe_append=' was registred</p>
                                      ^^^^
Did you mean?  @user):
    1: <div>
    2:   <p><%= user.email%> was registred</p>
    3: </div>
  
app/views/users/success.html.erb:2
app/controllers/users_controller.rb:20:in `create'
lib/middleware/filter_ip.rb:15:in `call'
Started GET "/users/signup" for ::1 at 2023-11-12 11:40:53 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 4415)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | Allocations: 10643)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 0.2ms | Allocations: 12438)


Started POST "/users" for ::1 at 2023-11-12 11:41:27 -0600
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user 43", "email"=>"user43@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "test user 43"], ["email", "user43@mail.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-11-12 17:41:28.093060"], ["updated_at", "2023-11-12 17:41:28.093060"]]
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user43@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user43@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/success.html.erb within layouts/application
  Rendered users/success.html.erb within layouts/application (Duration: 0.4ms | Allocations: 113)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | Allocations: 5919)
Completed 200 OK in 525ms (Views: 4.7ms | ActiveRecord: 3.6ms | Allocations: 9738)


Started GET "/" for ::1 at 2023-11-12 19:53:43 -0600
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as HTML
  Rendering layout layouts/application.html.erb
  Rendering authentication/login.html.erb within layouts/application
  Rendered authentication/login.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2409)
  Rendered layout layouts/application.html.erb (Duration: 86.2ms | Allocations: 48914)
Completed 200 OK in 91ms (Views: 87.6ms | ActiveRecord: 0.0ms | Allocations: 53188)


Started GET "/users/signup" for ::1 at 2023-11-12 19:53:48 -0600
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/auth/authorize_api_request.rb:24:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 11.4ms | Allocations: 12229)
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 18255)
Completed 200 OK in 33ms (Views: 16.0ms | ActiveRecord: 3.5ms | Allocations: 28351)


Started POST "/users" for ::1 at 2023-11-12 19:54:18 -0600
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"name"=>"test user 44", "email"=>"user44@mail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"user", "active"=>"true"}, "commit"=>"Create User"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "role", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "test user 44"], ["email", "user44@mail.com"], ["password_digest", "[FILTERED]"], ["role", "user"], ["active", true], ["created_at", "2023-11-13 01:54:18.763012"], ["updated_at", "2023-11-13 01:54:18.763012"]]
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:13:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user44@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user44@mail.com"], ["LIMIT", 1]]
  â†³ app/auth/authenticate_user.rb:21:in `user'
  Rendering layout layouts/application.html.erb
  Rendering users/success.html.erb within layouts/application
  Rendered users/success.html.erb within layouts/application (Duration: 0.4ms | Allocations: 153)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | Allocations: 6101)
Completed 200 OK in 519ms (Views: 4.6ms | ActiveRecord: 3.8ms | Allocations: 11273)


